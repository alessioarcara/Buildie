(()=>{"use strict";var e={9141:(e,t,r)=>{r.r(t),r.d(t,{default:()=>In});var n=r(5861),i=r(9526),o=r(2070),a=r(4942),s=r(1074);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var l={userId:null,accessToken:null,refreshToken:null,didTryLogin:!1},d=(0,s.createSlice)({name:"auth",initialState:l,reducers:{setDidTryToLogin:function(e){return u(u({},e),{},{didTryLogin:!0})},login:function(e,t){var r=t.payload;return{userId:r.userId,accessToken:r.accessToken,refreshToken:r.refreshToken,didTryLogin:!0}},logout:function(){return u(u({},l),{},{didTryLogin:!0})}}}),f=d.actions,h=f.login,p=f.logout,y=f.setDidTryToLogin;const g=d.reducer;var m=(0,s.createSlice)({name:"gameState",initialState:{},reducers:{setGameState:function(e,t){return t.payload},setGameSpeed:function(e,t){return{initialSpeed:t.payload}},resetGameState:function(e){return{initialSpeed:e.initialSpeed}}}}),b=m.actions,v=b.setGameState,j=b.setGameSpeed,x=b.resetGameState;const O=m.reducer;var w=(0,s.createSlice)({name:"settings",initialState:{sounds:!1,haptics:!1},reducers:{setSettings:function(e,t){return t.payload}}}),P=w.actions.setSettings;const S=w.reducer;var k,C,I,E,T,D,_,R,L,A=r(767).openDatabase("buildie.db"),H=r(3694),M=r(2818),N=r(5235),B=r(7216),V=r(1880),z=(0,M.gql)(k||(k=(0,V.default)(["\n  mutation ($input: SignupInput!) {\n    signup(input: $input) {\n      data {\n        accessToken\n        refreshToken\n        userId\n      }\n      problem\n    }\n  }\n"]))),F=(0,M.gql)(C||(C=(0,V.default)(["\n  mutation ($input: SigninInput!) {\n    signin(input: $input) {\n      data {\n        accessToken\n        refreshToken\n        userId\n      }\n      problem\n    }\n  }\n"]))),G=(0,M.gql)(I||(I=(0,V.default)(["\n  mutation ($refreshToken: String!) {\n    refreshToken(refreshToken: $refreshToken) {\n      userId\n      refreshToken\n      accessToken\n    }\n  }\n"]))),q=(0,M.gql)(E||(E=(0,V.default)(["\n  mutation ($refreshToken: String!) {\n    invalidateRefreshToken(refreshToken: $refreshToken)\n  }\n"]))),U=(0,M.gql)(T||(T=(0,V.default)(["\n  query {\n    scores {\n      _id\n      score\n      username\n    }\n  }\n"]))),W=(0,M.gql)(D||(D=(0,V.default)(["\n  mutation ($score: Int!) {\n    submitScore(score: $score) {\n      data {\n        _id\n        score\n        username\n      }\n      problem\n    }\n  }\n"]))),$=(0,M.gql)(_||(_=(0,V.default)(["\n  mutation ($username: String!) {\n    createGame(username: $username) {\n      data {\n        _id\n      }\n      problem\n    }\n  }\n"]))),J=(0,M.gql)(R||(R=(0,V.default)(["\n  mutation ($gameId: ID!, $gameOver: Boolean!, $playerBoard: [Int!]!) {\n    updateGame(\n      gameId: $gameId\n      gameOver: $gameOver\n      playerBoard: $playerBoard\n    ) {\n      data {\n        gameStatus\n        players {\n          user\n          board\n        }\n      }\n      problem\n    }\n  }\n"]))),K=(0,M.gql)(L||(L=(0,V.default)(["\n  query ($gameId: String!) {\n    game(gameId: $gameId) {\n      gameStatus\n      players {\n        user\n        board\n      }\n    }\n  }\n"]))),Y="userData",Q="gameState",Z="settings",X=function(e){return function(){var t=(0,n.default)((function*(t){var r;t(h(e)),r=e,B.setItemAsync(Y,JSON.stringify(r))}));return function(e){return t.apply(this,arguments)}}()},ee=function(){return function(e,t){var r=t().auth.refreshToken;B.deleteItemAsync(Y),e(te.endpoints.logout.initiate(r)),e(p())}},te=(0,H.createApi)({reducerPath:"gameApi",baseQuery:function(e){var t=e.baseUrl,r=e.prepareHeaders,i=void 0===r?function(e){return e}:r;return function(){var e=(0,n.default)((function*(e,r){var n=e.body,o=e.variables,a=r.getState,s=r.dispatch;function c(){return i(new Headers,{getState:a,dispatch:s})}try{return{data:yield(0,M.request)(t,n,o,yield c())}}catch(f){if(f instanceof M.ClientError){var u;if(null!=(u=f.response.errors)&&u.some((function(e){var t;return"UNAUTHENTICATED"===(null==(t=e.extensions)?void 0:t.code)})))try{var l=a().auth.refreshToken,d=yield(0,M.request)(t,G,{refreshToken:l});return s(X(d.refreshToken)),{data:yield(0,M.request)(t,n,o,yield c())}}catch(f){return s(ee()),{error:{name:"REFRESH_TOKEN",message:"Invalid or expired refresh token"}}}return{error:{name:f.name,message:f.message,stack:f.stack}}}if(f instanceof Error)return{error:{name:"Error",message:f.message}};throw f}}));return function(t,r){return e.apply(this,arguments)}}()}({baseUrl:"http:/192.168.178.90:4000/graphql",prepareHeaders:function(e,t){var r=(0,t.getState)().auth.accessToken;return r&&e.set("authorization","Bearer "+r),e}}),tagTypes:["Scores"],endpoints:function(e){return{signup:e.mutation({query:function(e){return{body:z,variables:{input:e}}},transformResponse:function(e){return e.signup}}),signin:e.mutation({query:function(e){return{body:F,variables:{input:e}}},transformResponse:function(e){return e.signin}}),logout:e.mutation({query:function(e){return{body:q,variables:{refreshToken:e}}}}),scores:e.query({query:function(){return{body:U}},transformResponse:function(e){return e.scores},providesTags:function(){return["Scores"]}}),submitScore:e.mutation({query:function(e){return{body:W,variables:{score:e}}},transformResponse:function(e){return e.submitScore},invalidatesTags:["Scores"]}),createGame:e.mutation({query:function(e){return{body:$,variables:{username:e}}},transformResponse:function(e){return e.createGame}}),game:e.query({query:function(e){return{body:K,variables:{gameId:e}}},transformResponse:function(e){return e.game},onCacheEntryAdded:function(){var e=(0,n.default)((function*(e,t){var r=t.updateCachedData,n=t.cacheDataLoaded,i=t.cacheEntryRemoved,o=(0,N.createClient)({url:"ws://192.168.178.90:4000/graphql"});try{yield n,yield new Promise((function(t,n){o.subscribe({query:'subscription { gameUpdate(gameId: "'+e+'") { gameStatus winner players { user board } } }'},{next:function(e){r((function(){return e.data.gameUpdate}))},error:n,complete:function(){return t}})}))}catch(a){console.log(a)}yield i,o.dispose()}));return function(t,r){return e.apply(this,arguments)}}()}),updateGame:e.mutation({query:function(e){return{body:J,variables:{gameId:e.gameId,gameOver:e.gameOver,playerBoard:e.playerBoard}}},transformResponse:function(e){return e.updateGame}})}}}),re=te.useSignupMutation,ne=te.useSigninMutation,ie=te.useScoresQuery,oe=te.useCreateGameMutation,ae=te.useGameQuery,se=te.useUpdateGameMutation,ce=r(5519),ue=(0,s.createAsyncThunk)("scores/loadScores",function(){var e=(0,n.default)((function*(e,t){var r=t.rejectWithValue;try{return(yield new Promise((function(e,t){A.transaction((function(r){r.executeSql("SELECT * FROM scores WHERE score > 0 ORDER BY score DESC",[],(function(t,r){e(r)}),(function(e,r){return t(r),!1}))}))}))).rows._array}catch(n){return r(n)}}));return function(t,r){return e.apply(this,arguments)}}()),le=(0,s.createAsyncThunk)("scores/submitScore",function(){var e=(0,n.default)((function*(e,t){var r=t.dispatch,n=t.rejectWithValue;r(te.endpoints.submitScore.initiate(e.score));try{var i=yield function(e){return new Promise((function(t,r){A.transaction((function(n){n.executeSql("INSERT INTO scores (username, score) VALUES (?, ?);",[e.username,e.score],(function(e,r){t(r)}),(function(e,t){return r(t),!1}))}))}))}(e);return{_id:i.insertId.toString(),score:e.score,username:e.username}}catch(o){return n(o)}finally{ce.default.removeItem(Q),r(x())}}));return function(t,r){return e.apply(this,arguments)}}());const de=(0,s.createSlice)({name:"scores",initialState:{localScores:[]},reducers:{},extraReducers:function(e){e.addCase(le.fulfilled,(function(e,t){var r=t.payload;e.localScores=e.localScores.concat(r)})),e.addCase(ue.fulfilled,(function(e,t){var r=t.payload;e.localScores=r}))}}).reducer;const fe=(0,s.configureStore)({reducer:(0,a.default)({auth:g,game:O,settings:S,scores:de},te.reducerPath,te.reducer),middleware:function(e){return e().concat(te.middleware)}});var he=r(5693),pe=r(2982),ye={"-1":"transparent",0:"#000000",1:"#66CCFF",2:"#FFD500",3:"#FF971C",4:"#0341AE",5:"#72CB3B",6:"#FF3213",7:"#AA00FF",9:"#808080"},ge=function(e){return e.black="#121212EE",e.white="#eee",e.primary="#3b5998",e.primaryLight="#4c669f",e.primaryDark="#192f6a",e.secondary="orange",e.error="#B00020",e}({}),me=r(5567),be=r(3292),ve=r(4333),je=r(1133),xe=r(7557);const Oe=function(e){var t=e.children;return(0,xe.jsxs)(je.default,{style:we.screen,children:[(0,xe.jsx)(be.default,{style:"light"}),(0,xe.jsx)(me.LinearGradient,{style:we.background,colors:[ge.primaryLight,ge.primary,ge.primaryDark]}),t]})};var we=ve.default.create({screen:{flex:1},background:{position:"absolute",left:0,right:0,top:0,bottom:0}}),Pe=r(5987),Se=r(1451),ke=r(9233);function Ce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ie(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ce(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const Ee=function(e){var t=e.children,r=e.style;return(0,xe.jsx)(ke.default,{style:Ie(Ie({},Te.text),r),children:t})};var Te=ve.default.create({text:{fontFamily:"dogbyte"}}),De=["children","style","textStyle"];function _e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Re(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_e(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const Le=function(e){var t=e.children,r=e.style,n=e.textStyle,i=(0,Pe.default)(e,De);return(0,xe.jsx)(Se.default,Re(Re({style:[Ae.button,r],activeOpacity:.6},i),{},{children:(0,xe.jsxs)(je.default,{style:Ae.buttonTextContainer,children:[i.disabled&&(0,xe.jsx)(je.default,{style:Ae.lineContainer,children:(0,xe.jsx)(je.default,{style:Ae.line})}),(0,xe.jsx)(Ee,{style:Re(Re({},Ae.buttonText),n),children:t})]})}))};var Ae=ve.default.create({button:{paddingVertical:12,paddingHorizontal:30,borderRadius:25},lineContainer:{position:"absolute",top:0,bottom:0,left:0,right:0,justifyContent:"center",zIndex:1},line:{borderBottomWidth:4,borderColor:"red"},buttonTextContainer:{alignSelf:"center"},buttonText:{color:"white",paddingVertical:5,fontSize:26}}),He=r(9899);function Me(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ne(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Me(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const Be=i.memo((function(e){var t=e.pressHandler,r=e.icon,n=e.style;return(0,xe.jsx)(Se.default,{onPress:t,style:Ne(Ne({},Ve.button),n),children:(0,xe.jsx)(He.default,{style:Ve.icon,resizeMode:"cover",source:r})})}));var Ve=ve.default.create({button:{width:50,height:50},icon:{width:"100%",height:"100%"}}),ze=r(6337),Fe=r(7132),Ge=r(5648);const qe=i.memo((function(e){var t=e.gameMode,r=e.setGameModeHandler;return(0,xe.jsx)(je.default,{style:Ue.leaderboardHeaderContainer,children:(0,xe.jsxs)(je.default,{style:Ue.leaderboardHeader,children:[(0,xe.jsx)(je.default,{style:Ue.titleContainer,children:(0,xe.jsx)(Ee,{style:Ue.title,children:"HIGHSCORES"})}),(0,xe.jsxs)(je.default,{style:Ue.gameModeContainer,children:[(0,xe.jsx)(Le,{style:[Ue.gameMode,"LOCAL"===t&&Ue.selectedGameMode],textStyle:{color:"LOCAL"===t?"black":"white"},onPress:function(){r("LOCAL")},children:"LOCAL"}),(0,xe.jsx)(Le,{style:[Ue.gameMode,"ONLINE"===t&&Ue.selectedGameMode],textStyle:{color:"ONLINE"===t?"black":"white"},onPress:function(){r("ONLINE")},children:"ONLINE"})]})]})})}));var Ue=ve.default.create({leaderboardHeaderContainer:{paddingTop:"android"===Fe.default.OS?Ge.default.currentHeight:0,backgroundColor:"#000"},leaderboardHeader:{justifyContent:"flex-end",alignItems:"center",backgroundColor:"#000",height:.2*ze.default.get("window").height},titleContainer:{flexDirection:"row",alignItems:"center"},title:{color:"white",fontSize:60},gameModeContainer:{flexDirection:"row",paddingVertical:10},gameMode:{flex:1,backgroundColor:"black"},selectedGameMode:{backgroundColor:"white",borderRadius:10}});function We(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $e(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?We(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):We(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const Je=function(e){var t=e.children,r=e.style;return(0,xe.jsx)(je.default,{style:$e($e({},Ke.card),r),children:t})};var Ke=ve.default.create({card:{backgroundColor:"white",borderRadius:12,shadowColor:"black",shadowOpacity:.26,shadowOffset:{width:0,height:2},shadowRadius:8,elevation:5}}),Ye=r(885),Qe=r(3497);function Ze(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Xe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ze(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ze(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var et=function(e){return e.INPUT_CHANGE="INPUT_CHANGE",e.INPUT_BLUR="INPUT_BLUR",e}({}),tt=function(e,t){switch(t.type){case et.INPUT_CHANGE:return Xe(Xe({},e),{},{value:t.value,isValid:t.isValid});case et.INPUT_BLUR:return Xe(Xe({},e),{},{touched:!0});default:return e}};function rt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function nt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rt(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const it=i.memo((function(e){var t,r,n=(0,i.useReducer)(tt,{value:null!=(t=null==e?void 0:e.initialValue)?t:"",isValid:null!=(r=null==e?void 0:e.initiallyValid)&&r,touched:!1}),o=(0,Ye.default)(n,2),a=o[0],s=o[1],c=e.id,u=e.onInputChange;(0,i.useEffect)((function(){a.touched&&u(e.id,a.value,a.isValid)}),[c,a,u]);return(0,xe.jsxs)(je.default,{style:ot.control,children:[(0,xe.jsx)(Ee,{style:ot.label,children:e.label}),(0,xe.jsx)(Qe.default,nt(nt({},e),{},{style:ot.input,value:a.value,onChangeText:function(t){var r=!0;e.required&&0===t.trim().length&&(r=!1),e.email&&!/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t.toLowerCase())&&(r=!1),null!=e.min&&+t<e.min&&(r=!1),null!=e.max&&+t>e.max&&(r=!1),null!=e.minLength&&t.length<e.minLength&&(r=!1),s({type:et.INPUT_CHANGE,value:t,isValid:r})},onBlur:function(){s({type:et.INPUT_BLUR})}})),!a.isValid&&a.touched&&(0,xe.jsx)(je.default,{style:ot.errorContainer,children:(0,xe.jsx)(Ee,{style:ot.error,children:e.errorText})})]})}));var ot=ve.default.create({control:{width:"100%"},label:{color:"#ccc",fontSize:18,marginVertical:8},input:{paddingHorizontal:2,paddingVertical:5,borderBottomColor:"#ccc",borderBottomWidth:1,fontSize:18,color:"white"},errorContainer:{marginVertical:5},error:{color:"red",fontSize:18}}),at=r(7447);const st=JSON.parse('{"I":"0000111100000000","O":"0000022002200000","L":"0000033303000000","J":"0000044400040000","S":"0000005505500000","Z":"0000066000660000","T":"0000077700700000"}');function ct(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ut(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ct(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ct(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const lt=i.memo((function(e){var t=e.type,r=e.width,n=e.border;return(0,xe.jsx)(je.default,{style:ut(ut({},dt.cell),{borderBottomWidth:n?2:0,borderColor:n?"black":"",width:r,height:r,backgroundColor:ye[t]})})}));var dt=ve.default.create({cell:{}});function ft(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ht(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ft(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ft(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var pt=.15*ze.default.get("window").width;const yt=i.memo((function(e){var t=e.title,r=e.piece,n=e.transparentBackground,i=r&&(0,pe.default)(r).map((function(e,t){return(0,xe.jsx)(lt,{type:0===+e&&n?-1:+e,width:pt/4,border:!n},"h_"+t)}));return(0,xe.jsxs)(xe.Fragment,{children:[(0,xe.jsx)(Ee,{style:gt.title,children:t}),(0,xe.jsx)(je.default,{style:ht(ht({},gt.pieceContainer),{borderColor:n?"":"grey",borderWidth:n?0:2}),children:(0,xe.jsx)(je.default,{style:ht(ht({},gt.piece),{backgroundColor:n?"":"#000"}),children:i})})]})}));var gt=ve.default.create({pieceContainer:{marginBottom:10},title:{color:"#bbb",fontSize:18,textAlign:"center"},piece:{width:pt,height:pt,flexDirection:"row",flexWrap:"wrap"}}),mt=ze.default.get("window").height-pt,bt=ze.default.get("window").width-pt;const vt=function(e){var t=e.children,r=(0,i.useRef)(Object.values(st)).current,n=(0,i.useState)(Math.floor(Math.random()*bt)),o=(0,Ye.default)(n,2),a=o[0],s=o[1],c=(0,i.useRef)(new at.default.Value(0)).current;return(0,i.useEffect)((function(){!function e(){at.default.timing(c,{toValue:mt,duration:4e3,useNativeDriver:!0}).start((function(t){t.finished&&(s(Math.floor(Math.random()*bt)),c.setValue(0),e())}))}()}),[]),(0,xe.jsxs)(Oe,{children:[(0,xe.jsx)(at.default.View,{style:{left:a,transform:[{translateY:c}]},children:(0,xe.jsx)(yt,{piece:r[Math.floor(Math.random()*r.length)],transparentBackground:!0})}),t]})};ve.default.create({animatedPiece:{position:"absolute",top:0}});var jt=r(5671),xt=r(3144),Ot=r(6274),wt=r(9359);const Pt={0:1,1:100,2:300,3:500,4:800};var St=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;(0,jt.default)(this,e),this._initialSpeed=r,this._speed=r,this._lines=n,this._score=i,this._board=null!=t?t:this.init()}return(0,xt.default)(e,[{key:"board",get:function(){return this._board}},{key:"lines",get:function(){return this._lines}},{key:"speed",get:function(){return this._speed}},{key:"score",get:function(){return this._score}},{key:"init",value:function(){for(var t=new Uint8Array(e.h*e.w),r=0;r<e.h;r+=1)for(var n=0;n<e.w;n+=1)t[r*e.w+n]=0===n||n===e.w-1||r===e.h-1?9:0;return t}},{key:"clearLines",value:function(t){for(var r=0,n=t;n<e.h-1;n+=1){for(var i=!0,o=0;o<e.w;o+=1)if(0===this._board[n*e.w+o]||void 0===this._board[n*e.w+o]){i=!1;break}if(i){for(var a=n;a>0;a-=1)for(var s=1;s<e.w-1;s+=1)this.board[a*e.w+s]=this.board[(a-1)*e.w+s];r++,this._lines++}}this._score+=this.speed*r*Pt[r],this._speed=Math.floor((this.lines+10)/10)+(this._initialSpeed-1)}},{key:"reset",value:function(){this._score=0,this._lines=0,this._speed=this._initialSpeed,this._board=this.init()}}]),e}();St.w=12,St.h=24;const kt=St;var Ct=(0,wt.default)("board"),It=function(){function e(t,r){(0,jt.default)(this,e),Object.defineProperty(this,Ct,{writable:!0,value:void 0}),this.x=t.x,this.y=t.y,this.r=t.r,this._shape=t,(0,Ot.default)(this,Ct)[Ct]=r,this.collided=!1}return(0,xt.default)(e,[{key:"shape",get:function(){return this._shape.shape}},{key:"board",get:function(){return(0,Ot.default)(this,Ct)[Ct].board}},{key:"reset",value:function(){this.x=this._shape.x,this.y=this._shape.y,this.r=this._shape.r,this.collided=!1}},{key:"rotate",value:function(t,r,n){switch(n%4){case 1:return e.w*(e.w-1)+r-e.w*t;case 2:return e.w*e.w-1-e.w*r-t;case 3:return e.w-1-r+e.w*t;default:return e.w*r+t}}},{key:"collides",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.x,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.y,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.r,i=0;i<e.w;i+=1)for(var o=0;o<e.w;o+=1)if(0!==+this.shape[this.rotate(o,i,n)]&&0!==this.board[(i+r)*kt.w+(o+t)])return!0;return!1}},{key:"lock",value:function(){for(var t=0;t<e.w;t+=1)for(var r=0;r<e.w;r+=1)0!==+this.shape[this.rotate(r,t,this.r)]&&(this.board[(t+this.y)*kt.w+(r+this.x)]=+this.shape[this.rotate(r,t,this.r)])}},{key:"moveDown",value:function(){if(this.collides(this.x,this.y+1))return this.collided=!0,this.lock(),void(0,Ot.default)(this,Ct)[Ct].clearLines(this.y);this.y+=1}},{key:"moveLeft",value:function(){this.x-=this.collides(this.x-1)?0:1}},{key:"moveRight",value:function(){this.x+=this.collides(this.x+1)?0:1}},{key:"wallKick",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return!this.collides(this.x+e,this.y,this.r+1)||e<-1||e>1?e:this.wallKick(e+=this.x>kt.w/2?-1:1)}},{key:"rotateRight",value:function(){var e=this.wallKick();this.collides(this.x+this.wallKick(),this.y,this.r+1)||(this.x+=e,this.r+=1)}},{key:"hardDrop",value:function(){for(;!this.collided;)this.moveDown()}}]),e}();It.w=4;const Et=It;function Tt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Dt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Tt(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const _t=function(e){var t=e.currPiece,r=e.board,n=e.boardWidth,o=e.border,a=(0,i.useMemo)((function(){return Math.floor(n/kt.w)}),[]),s=(0,i.useMemo)((function(){return r.map((function(e,t){return(0,xe.jsx)(lt,{type:e,width:a,border:o},"b_"+t)}))}),[r]),c=(0,i.useCallback)((function(e,t,r){for(var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=0;i<Et.w;i+=1)for(var s=0;s<Et.w;s+=1){var c=(r+i)*kt.w+(t.x+s),u=t.rotate(s,i,t.r);0!==+t.shape[u]&&(e[c]=(0,xe.jsx)(lt,{type:n?8:+t.shape[u],width:a,border:o},"b_"+c))}}),[]),u=(0,i.useCallback)((function(e,t){for(var r=(0,pe.default)(e),n=null,i=kt.h-2;i>t.y;i-=1)t.collides(t.x,i)&&(n=i-1);return n&&c(r,t,n,!0),c(r,t,t.y),r}),[]);return(0,xe.jsx)(je.default,{style:Rt.gridContainer,children:(0,xe.jsx)(je.default,{style:Dt(Dt({},Rt.grid),{},{width:n}),children:t?u(s,t):s})})};var Rt=ve.default.create({gridContainer:{justifyContent:"center",alignItems:"center"},grid:{flexDirection:"row",flexWrap:"wrap"}});const Lt=function(e,t,r){var n=(0,i.useRef)(null),o=(0,i.useMemo)((function(){return 1e3/e}),[e]),a=(0,i.useRef)(performance.now()),s=(0,i.useRef)(0),c=(0,i.useRef)(!1),u=function e(i){var c=i-a.current;a.current=i,s.current+=c;for(var u=0;s.current>=o;)if(t(),s.current-=o,++u>240){s.current=0;break}u&&r(),n.current=requestAnimationFrame(e)};return{start:(0,i.useCallback)((function(){c.current||(c.current=!0,a.current=performance.now(),s.current=0,n.current=requestAnimationFrame(u))}),[c.current,e]),stop:(0,i.useCallback)((function(){c.current=!1,n.current&&cancelAnimationFrame(n.current)}),[])}};var At=r(7990),Ht=r(4069),Mt=r(8803),Nt=function(){return(0,o.useDispatch)()},Bt=o.useSelector;const Vt=function(e){var t=e.pressHandler,r=e.icon,n=e.feedback,o=void 0===n?"light":n,a=(0,i.useRef)(null),s=Bt((function(e){return e.settings.haptics}));return(0,xe.jsx)(je.default,{style:zt.buttonContainer,children:(0,xe.jsx)(Se.default,{onPressIn:function e(){if(s)if("medium"===o)Ht.impactAsync(Mt.ImpactFeedbackStyle.Medium);else Ht.selectionAsync();t(),a.current=setTimeout(e,150)},onPressOut:function(){clearTimeout(a.current)},style:zt.joystickButton,children:(0,xe.jsx)(At.default,{name:r,size:24,color:"rgba(0,0,0, 0.8)"})})})};var zt=ve.default.create({buttonContainer:{justifyContent:"center",alignItems:"center",margin:5},joystickButton:{justifyContent:"center",alignItems:"center",backgroundColor:"orange",width:60,height:60,borderWidth:2,borderColor:"black",borderRadius:30,shadowRadius:.5,shadowOffset:{width:0,height:2},shadowOpacity:.5}}),Ft=function(e){return e.MoveLeft="MOVE_LEFT",e.MoveRight="MOVE_RIGHT",e.MoveDown="MOVE_DOWN",e.RotateRight="ROTATE_RIGHT",e.RotateLeft="ROTATE_LEFT",e.HardDrop="HARD_DROP",e.HoldPiece="HOLD_PIECE",e}(Ft||{});const Gt=Ft;const qt=i.memo((function(e){var t=e.handleInput;return(0,xe.jsxs)(je.default,{style:Ut.joystick,children:[(0,xe.jsxs)(je.default,{style:Ut.joystickArrows,children:[(0,xe.jsx)(Vt,{icon:"arrow-up",pressHandler:function(){return t(Gt.HardDrop)},feedback:"medium"}),(0,xe.jsxs)(je.default,{style:Ut.joystickArrowsContainer,children:[(0,xe.jsx)(Vt,{icon:"arrow-left",pressHandler:function(){return t(Gt.MoveLeft)}}),(0,xe.jsx)(Vt,{icon:"arrow-down",pressHandler:function(){return t(Gt.MoveDown)}}),(0,xe.jsx)(Vt,{icon:"arrow-right",pressHandler:function(){return t(Gt.MoveRight)}})]})]}),(0,xe.jsxs)(je.default,{style:Ut.joystickButtons,children:[(0,xe.jsx)(Vt,{icon:"exchange",pressHandler:function(){return t(Gt.HoldPiece)}}),(0,xe.jsx)(Vt,{icon:"rotate-right",pressHandler:function(){return t(Gt.RotateRight)}})]})]})}));var Ut=ve.default.create({joystick:{height:.2*ze.default.get("window").height,flexDirection:"row",justifyContent:"center",alignItems:"center",marginBottom:10},joystickArrows:{flex:2},joystickArrowsContainer:{flexDirection:"row",justifyContent:"center"},joystickButtons:{flex:1}});const Wt=function(){var e=(0,i.useState)(!1)[1];return(0,i.useCallback)((function(){e((function(e){return!e}))}),[])};var $t=r(2727);const Jt=i.memo((function(e){var t=e.title,r=e.statistic,n=e.icon;return(0,xe.jsxs)(je.default,{style:Kt.gameStatisticContainer,children:[(0,xe.jsx)(je.default,{style:Kt.gameStatistic,children:(0,xe.jsx)(je.default,{style:Kt.iconContainer,children:(0,xe.jsx)(He.default,{style:Kt.icon,resizeMode:"cover",source:n})})}),(0,xe.jsx)(Ee,{style:Kt.title,children:t}),(0,xe.jsx)(Ee,{style:Kt.text,children:r})]})}));var Kt=ve.default.create({gameStatisticContainer:{flex:1,justifyContent:"flex-end",alignItems:"center",marginBottom:5},gameStatistic:{width:"100%",flexDirection:"column",alignItems:"center",justifyContent:"space-evenly"},iconContainer:{height:30,width:30},icon:{width:"100%",height:"100%"},title:{fontSize:25,color:"#ccc"},text:{fontSize:25,color:"#eee",marginTop:5}});const Yt=function(e){var t=e.speed,n=e.lines,i=e.score;return(0,xe.jsx)(je.default,{style:Qt.gameHeaderContainer,children:(0,xe.jsxs)(je.default,{style:Qt.gameHeader,children:[(0,xe.jsx)(Jt,{title:"Level",statistic:t,icon:r(371)}),(0,xe.jsx)(Jt,{title:"Lines",statistic:n,icon:r(9718)}),(0,xe.jsx)(Jt,{title:"Score",statistic:i,icon:r(7152)})]})})};var Qt=ve.default.create({gameHeaderContainer:{paddingTop:"android"===Fe.default.OS?Ge.default.currentHeight:0,backgroundColor:"#000"},gameHeader:{flexDirection:"row",height:.14*ze.default.get("window").height,width:"100%",borderBottomWidth:2,borderColor:"grey",backgroundColor:"#000"}}),Zt=r(213);const Xt=[r(496),r(2976),r(7434),r(9163),r(1309),r(7304),r(6704),r(8740),r(2499),r(7096),r(2618)];const er=function(){var e=(0,i.useRef)(new Array(Xt.length)).current,t=(0,i.useRef)(null),r=(0,i.useState)(!0),o=(0,Ye.default)(r,2),a=o[0],s=o[1],c=(0,i.useState)(!1),u=(0,Ye.default)(c,2),l=u[0],d=u[1],f=Bt((function(e){return e.settings.sounds})),h=(0,i.useCallback)(function(){var r=(0,n.default)((function*(r){if(f)try{t.current=e[r],yield t.current.playFromPositionAsync(0),d(!1)}catch(n){console.log(n)}}));return function(e){return r.apply(this,arguments)}}(),[f,t.current]),p=(0,i.useCallback)((function(){f&&t.current&&t.current.stopAsync()}),[f,t.current]);return(0,i.useEffect)((function(){if(f){try{(0,n.default)((function*(){for(var t=0;t<e.length;t+=1){var r=(yield Zt.Sound.createAsync(Xt[t],{volume:.2},(function(e){e.didJustFinish&&d(!0)}))).sound;e[t]=r}s(!1)}))()}catch(t){console.log(t)}return function(){for(var t=0;t<e.length;t+=1)e[t]&&e[t].unloadAsync()}}}),[]),[h,p,{isLoading:a,didFinish:l}]};var tr=.3*ze.default.get("window").height;const rr=function(e){var t=e.game,r=e.children,n=(0,$t.useNavigation)(),o=er(),a=(0,Ye.default)(o,3),s=a[0],c=(a[1],a[2]),u=c.isLoading,l=c.didFinish,d=Wt(),f=(0,i.useCallback)((function(e){t.inputHandler(e),d()}),[]),h=(0,i.useCallback)((function(){t.update()}),[]),p=Lt(t.speed,h,d),y=p.start,g=p.stop;return(0,$t.useFocusEffect)((0,i.useCallback)((function(){return t.gameOver&&t.reset(),y(),function(){g()}}),[t.speed])),(0,i.useEffect)((function(){var e=function(e){var t={ArrowLeft:function(){return f(Gt.MoveLeft)},ArrowRight:function(){return f(Gt.MoveRight)},ArrowUp:function(){return f(Gt.HardDrop)},ArrowDown:function(){return f(Gt.MoveDown)},PageUp:function(){return f(Gt.RotateLeft)},PageDown:function(){return f(Gt.RotateRight)},ShiftLeft:function(){return f(Gt.HoldPiece)}}[e.code];null==t||t()};if("web"==Fe.default.OS)return window.addEventListener("keydown",e),function(){return removeEventListener("keydown",e)}}),[]),(0,i.useEffect)((function(){u||s(t.speed)}),[u,l]),(0,i.useEffect)((function(){t.gameOver&&n.navigate("GameModal",{gameOver:!0})}),[t.gameOver]),(0,i.useLayoutEffect)((function(){n.setOptions({header:function(){return(0,xe.jsx)(Yt,{speed:t.speed,lines:t.lines,score:t.score})}})}),[t.speed,t.lines,t.score]),(0,xe.jsxs)(je.default,{style:nr.gameContainer,children:[(0,xe.jsxs)(je.default,{style:nr.game,children:[(0,xe.jsx)(_t,{currPiece:t.currPiece,board:Array.from(t.board),boardWidth:tr,border:!0}),(0,xe.jsxs)(je.default,{style:nr.sidePanel,children:[(0,xe.jsx)(yt,{title:"hold",piece:t.heldPiece}),(0,xe.jsx)(yt,{title:"next",piece:t.nextPiece}),r]})]}),(0,xe.jsx)(qt,{handleInput:f})]})};var nr=ve.default.create({gameContainer:{width:"100%",height:"100%",alignItems:"center",justifyContent:"flex-end"},game:{flexDirection:"row"},sidePanel:{marginLeft:5,alignItems:"center"}}),ir=r(6894),or=r(2243),ar=function(){return ir.loadAsync({dogbyte:r(1753)})};const sr=function(e){var t=e.children,r=(0,i.useState)(!1),n=(0,Ye.default)(r,2),o=n[0],a=n[1];return o?(0,xe.jsx)(xe.Fragment,{children:t}):(0,xe.jsx)(or.default,{startAsync:ar,onFinish:function(){return a(!0)},onError:function(e){return console.log(e)}})};function cr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ur(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?cr(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const lr=i.memo((function(e){var t=e.rank,r=e.score,n=e.name,i=e.me;return(0,xe.jsxs)(je.default,{style:dr.score,children:[(0,xe.jsx)(je.default,{style:dr.field,children:(0,xe.jsxs)(Ee,{style:ur(ur({},dr.text),{},{color:i?"yellow":"white"}),children:[t,"."]})}),(0,xe.jsx)(je.default,{style:dr.field,children:(0,xe.jsx)(Ee,{style:ur(ur({},dr.text),{},{color:i?"yellow":"white"}),children:r})}),(0,xe.jsx)(je.default,{style:dr.field,children:(0,xe.jsx)(Ee,{style:ur(ur({},dr.text),{},{color:i?"yellow":"white"}),children:n.slice(0,7)})})]})}));var dr=ve.default.create({score:{flexDirection:"row",justifyContent:"space-around",paddingVertical:10},field:{flex:1,flexShrink:0,alignItems:"center"},text:{fontSize:20}});const fr=i.memo((function(){return(0,xe.jsxs)(je.default,{style:hr.listHeader,children:[(0,xe.jsx)(je.default,{style:hr.title,children:(0,xe.jsx)(Ee,{style:hr.text,children:"RANK"})}),(0,xe.jsx)(je.default,{style:hr.title,children:(0,xe.jsx)(Ee,{style:hr.text,children:"SCORE"})}),(0,xe.jsx)(je.default,{style:hr.title,children:(0,xe.jsx)(Ee,{style:hr.text,children:"NAME"})})]})}));var hr=ve.default.create({listHeader:{flexDirection:"row",justifyContent:"space-around",backgroundColor:"#000"},title:{borderBottomColor:ge.primary,borderBottomWidth:4,paddingVertical:2},text:{color:"white",fontSize:30}});const pr=function(){var e=Bt((function(e){return e.game.initialScore})),t=(0,i.useState)(""),r=(0,Ye.default)(t,2),n=r[0],o=r[1],a=(0,i.useState)(!1),s=(0,Ye.default)(a,2),c=s[0],u=s[1],l=(0,i.useState)(!1),d=(0,Ye.default)(l,2),f=d[0],h=d[1],p=Nt(),y=(0,i.useCallback)((function(e,t,r){o(t),u(r)}),[]);return(0,xe.jsxs)(xe.Fragment,{children:[(0,xe.jsx)(Ee,{style:yr.title,children:"GAME OVER"}),(0,xe.jsxs)(Ee,{style:yr.text,children:["Your score: ",(0,xe.jsxs)(ke.default,{style:yr.score,children:[" ",e]})]}),f?(0,xe.jsx)(Ee,{style:yr.text,children:"Score saved !"}):(0,xe.jsxs)(je.default,{style:yr.form,children:[(0,xe.jsx)(it,{id:"name",label:"ENTER YOUR NAME:",value:n,onInputChange:y,error:!c,errorText:"Enter at least 3 characters.",autoCapitalize:"none",min:3,maxLength:6}),(0,xe.jsx)(Le,{onPress:function(){p(le({username:n,score:e})).unwrap().then((function(){h(!0)}))},disabled:!c,children:"SAVE SCORE"})]})]})};var yr=ve.default.create({title:{color:"#eee",fontSize:30},text:{color:"#ccc",fontSize:20},score:{color:"#eee",fontSize:24},form:{justifyContent:"center",alignItems:"center"}});const gr=function(){return(0,xe.jsxs)(xe.Fragment,{children:[(0,xe.jsx)(Ee,{style:mr.title,children:"PAUSE"}),(0,xe.jsx)(Ee,{style:mr.text,children:"Anytime you quit or close the app, the game will be saved."})]})};var mr=ve.default.create({title:{color:"#eee",fontSize:30},text:{color:"#ccc",fontSize:20,paddingVertical:4}}),br=.3*ze.default.get("window").height;const vr=function(e){var t=e.game,r=e.children,n=e.handleInput,o=(0,$t.useNavigation)(),a=er(),s=(0,Ye.default)(a,3),c=s[0],u=(s[1],s[2]),l=u.isLoading,d=u.didFinish;return(0,i.useEffect)((function(){l||c(t.speed)}),[l,d]),(0,i.useLayoutEffect)((function(){o.setOptions({header:function(){return(0,xe.jsx)(Yt,{speed:t.speed,lines:t.lines,score:t.score})}})}),[t.speed,t.lines,t.score]),(0,xe.jsxs)(je.default,{style:jr.gameContainer,children:[(0,xe.jsxs)(je.default,{style:jr.game,children:[(0,xe.jsx)(_t,{currPiece:t.currPiece,board:Array.from(t.board),boardWidth:br,border:!0}),(0,xe.jsxs)(je.default,{style:jr.sidePanel,children:[(0,xe.jsx)(yt,{title:"hold",piece:t.heldPiece}),(0,xe.jsx)(yt,{title:"next",piece:t.nextPiece}),r]})]}),(0,xe.jsx)(qt,{handleInput:n})]})};var jr=ve.default.create({gameContainer:{width:"100%",height:"100%",alignItems:"center",justifyContent:"flex-end"},game:{flexDirection:"row"},sidePanel:{marginLeft:5,alignItems:"center"}}),xr=r(8617);function Or(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function wr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Or(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Or(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Pr=ve.default.create({logo:{fontSize:100,color:"white"},list:{flex:1,alignItems:"center",justifyContent:"space-evenly"},homeButton:{backgroundColor:ge.primaryDark,minWidth:250,shadowRadius:0,shadowOffset:{width:0,height:6},shadowOpacity:1}});const Sr=function(e){var t=e.navigation,r=(0,xr.default)(),n=Bt((function(e){return!!e.auth.accessToken})),i=Bt((function(e){return!!e.game.initialBoard}));return(0,xe.jsx)(vt,{children:(0,xe.jsxs)(je.default,{style:wr({marginBottom:r},Pr.list),children:[(0,xe.jsx)(Ee,{style:Pr.logo,children:(0,pe.default)("Buildie").map((function(e,t){return(0,xe.jsx)(ke.default,{style:{color:ye[t+1]},children:e},e+"_"+t)}))}),(0,xe.jsx)(Le,{style:Pr.homeButton,onPress:function(){t.navigate("Singleplayer")},children:i?"Resume":"New game"}),(0,xe.jsx)(Le,{style:Pr.homeButton,onPress:function(){t.navigate("Leaderboard")},children:"Leaderboard"}),(0,xe.jsx)(Le,{style:Pr.homeButton,disabled:!n,onPress:function(){t.navigate("MultiplayerLobby")},children:"Multiplayer"}),(0,xe.jsx)(Le,{style:Pr.homeButton,onPress:function(){t.navigate("Settings")},children:"Settings"})]})})};var kr=r(1518);const Cr=function(e){var t=(0,i.useRef)();return void 0===t.current&&(t.current={value:"function"===typeof e?e():e}),t.current.value};const Ir=function(){function e(t,r,n,i){(0,jt.default)(this,e),this._shape=t,this._x=r,this._y=n,this._r=i}return(0,xt.default)(e,[{key:"shape",get:function(){return this._shape}},{key:"x",get:function(){return this._x}},{key:"y",get:function(){return this._y}},{key:"r",get:function(){return this._r}},{key:"newPiece",value:function(e){return new Et(this,e)}}]),e}();const Er=function(){function e(t){for(var r in(0,jt.default)(this,e),this._shapeTypes=[],t)this._shapeTypes.push(new Ir(t[r],(kt.w-Et.w)/2,-1,0))}return(0,xt.default)(e,[{key:"shapeTypes",get:function(){return this._shapeTypes}}]),e}();const Tr=function(){function e(t,r,n,i,o){var a=this;(0,jt.default)(this,e),this.alreadyHeld=!1,this.doesNextPieceFit=!0,this.inputHandler=function(e){var t,r,n,i,o,s;null!=(t=a.currPiece)&&t.collided||(e===Gt.MoveLeft?null==(r=a.currPiece)||r.moveLeft():e===Gt.MoveRight?null==(n=a.currPiece)||n.moveRight():e===Gt.MoveDown?null==(i=a.currPiece)||i.moveDown():e===Gt.RotateRight?null==(o=a.currPiece)||o.rotateRight():e===Gt.HardDrop?null==(s=a.currPiece)||s.hardDrop():e===Gt.HoldPiece&&a.holdPiece())},this._pool=new Array(t.length);for(var s=0;s<t.length;s+=1)this._pool[s]=t[s].newPiece(r);this._currPiece=n?this._pool[n-1]:null,this._heldPiece=i?this._pool[i-1]:null,this._nextPiece=o?this._pool[o-1]:this.randomPiece()}return(0,xt.default)(e,[{key:"currPiece",get:function(){return this._currPiece},set:function(e){this._currPiece=e}},{key:"nextPiece",get:function(){return this._nextPiece},set:function(e){this._nextPiece=e}},{key:"heldPiece",get:function(){return this._heldPiece},set:function(e){this._heldPiece=e}},{key:"randomPiece",value:function(){var e=Math.floor(Math.random()*this._pool.length);return this._pool[e]}},{key:"newPiece",value:function(){var e,t;null==(e=this.currPiece)||e.reset(),this.alreadyHeld=!1,this.doesNextPieceFit=!(null!=(t=this.nextPiece)&&t.collides()),this.currPiece=this.doesNextPieceFit?this.nextPiece:null,this.doesNextPieceFit&&(this.nextPiece=this.randomPiece())}},{key:"holdPiece",value:function(){if(null!==this.currPiece&&!this.alreadyHeld){if(this.currPiece.reset(),null===this.heldPiece)this.heldPiece=this.currPiece,this.newPiece();else{var e=this.currPiece;this.currPiece=this.heldPiece,this.heldPiece=e}this.alreadyHeld=!0}}},{key:"update",value:function(){var e;this.currPiece&&!this.currPiece.collided?null==(e=this.currPiece)||e.moveDown():this.newPiece()}},{key:"reset",value:function(){var e;null==(e=this.currPiece)||e.reset(),this.currPiece=null,this.heldPiece=null,this.nextPiece=this.randomPiece()}}]),e}();var Dr=function(){function e(t){var r=t.initialBoard,n=t.initialIndexCurrPiece,i=t.initialIndexHeldPiece,o=t.initialIndexNextPiece,a=t.initialSpeed,s=t.initialLines,c=t.initialScore;(0,jt.default)(this,e),this._board=new kt(r,a,s,c),this._piecePool=new Tr(new Er(st).shapeTypes,this._board,n,i,o)}return(0,xt.default)(e,[{key:"board",get:function(){return this._board.board}},{key:"currPiece",get:function(){return this._piecePool.currPiece}},{key:"heldPiece",get:function(){var e;return null==(e=this._piecePool.heldPiece)?void 0:e.shape}},{key:"nextPiece",get:function(){var e;return null==(e=this._piecePool.nextPiece)?void 0:e.shape}},{key:"speed",get:function(){return this._board.speed}},{key:"lines",get:function(){return this._board.lines}},{key:"score",get:function(){return this._board.score}},{key:"gameOver",get:function(){return!this._piecePool.doesNextPieceFit}},{key:"inputHandler",get:function(){return this._piecePool.inputHandler}},{key:"update",value:function(){this._piecePool.update()}},{key:"reset",value:function(){this._board.reset(),this._piecePool.reset()}}]),e}();const _r=Dr;var Rr=function(e,t,r,n,i,o,a){return{initialBoard:Array.from(e),initialIndexCurrPiece:o&&+o.replace(/^0+/,"")[0]||void 0,initialIndexHeldPiece:a&&+a.replace(/^0+/,"")[0]||void 0,initialIndexNextPiece:i&&+i.replace(/^0+/,"")[0]||void 0,initialSpeed:t,initialLines:r,initialScore:n}};const Lr=function(e){var t=e.navigation,n=Bt((function(e){return e.game})),o=n.initialBoard,a=n.initialIndexCurrPiece,s=n.initialIndexHeldPiece,c=n.initialIndexNextPiece,u=n.initialSpeed,l=n.initialLines,d=n.initialScore,f=Nt(),h=(0,i.useRef)(kr.default.currentState),p=Cr((function(){return new _r({initialBoard:o&&Uint8Array.from(o),initialIndexCurrPiece:a,initialIndexHeldPiece:s,initialIndexNextPiece:c,initialSpeed:u,initialLines:l,initialScore:d})})),y=(0,i.useCallback)((function(e){"active"===h.current&&e.match(/inactive|background/)&&function(){var e;ce.default.setItem("gameState",JSON.stringify(Rr(p.board,p.speed,p.lines,p.score,p.nextPiece,null==(e=p.currPiece)?void 0:e.shape,p.heldPiece)))}(),h.current=e}),[]),g=(0,i.useCallback)((function(){t.navigate("GameModal",{gameOver:!1})}),[]);return(0,$t.useFocusEffect)((function(){return function(){var e;f(v(Rr(p.board,p.speed,p.lines,p.score,p.nextPiece,null==(e=p.currPiece)?void 0:e.shape,p.heldPiece)))}})),(0,i.useEffect)((function(){var e=kr.default.addEventListener("change",y);return function(){e.remove()}}),[]),(0,xe.jsx)(Oe,{children:(0,xe.jsx)(rr,{game:p,children:(0,xe.jsx)(Be,{pressHandler:g,icon:r(5900)})})})};var Ar=r(9566);const Hr=function(e){var t=e.navigation,r=(0,i.useState)("LOCAL"),n=(0,Ye.default)(r,2),o=n[0],a=n[1],s=(0,i.useRef)(null),c=Bt((function(e){return e.scores.localScores})),u=Bt((function(e){return e.auth.userId})),l=ie().data,d=Nt(),f=(0,i.useCallback)((function(e){var t;a(e),null==(t=s.current)||t.scrollToOffset({animated:!0,offset:0})}),[]),h=(0,i.useCallback)((function(e){var t=e.item,r=e.index;return(0,xe.jsx)(lr,{rank:r+1,score:t.score,name:t.username,me:t._id===u})}),[u]);return(0,i.useEffect)((function(){d(ue())}),[d]),(0,i.useLayoutEffect)((function(){t.setOptions({header:function(){return(0,xe.jsx)(qe,{gameMode:o,setGameModeHandler:f})}})}),[o]),(0,xe.jsxs)(je.default,{style:Mr.leaderboardContainer,children:[(0,xe.jsx)(Ar.default,{ref:s,data:"LOCAL"===o?c:l,keyExtractor:function(e){return e._id},renderItem:h,stickyHeaderIndices:[0],ListHeaderComponent:(0,xe.jsx)(fr,{})}),(0,xe.jsx)(Le,{onPress:function(){t.goBack()},textStyle:Mr.button,children:"CLOSE"})]})};var Mr=ve.default.create({leaderboardContainer:{flex:1,backgroundColor:"#000"},button:{fontSize:50}});const Nr=ve.default.create({centered:{flex:1,justifyContent:"center",alignItems:"center"}});const Br=function(){var e=Nt();return(0,xe.jsx)(Oe,{children:(0,xe.jsx)(je.default,{style:Nr.centered,children:(0,xe.jsx)(Le,{style:Vr.logoutButton,onPress:function(){return e(ee())},children:"Logout"})})})};var Vr=ve.default.create({logoutButton:{backgroundColor:ge.error}}),zr=r(4637),Fr=r(572),Gr=ze.default.get("window").width;const qr=function(e){var t=e.navigation,n=e.route;return(0,xe.jsx)(Fr.default,{style:Ur.screen,intensity:20,children:(0,xe.jsx)(zr.default,{style:Ur.backdrop,onPress:function(){t.goBack()},children:(0,xe.jsx)(Je,{style:Ur.modalContainer,children:(0,xe.jsxs)(zr.default,{style:Ur.modal,children:[n.params.gameOver?(0,xe.jsx)(pr,{}):(0,xe.jsx)(gr,{}),(0,xe.jsxs)(je.default,{style:Ur.actions,children:[(0,xe.jsx)(Be,{icon:r(5489),pressHandler:function(){t.navigate("Root")}}),(0,xe.jsx)(Be,{icon:n.params.gameOver?r(3433):r(2487),pressHandler:function(){t.goBack()}})]})]})})})})};var Ur=ve.default.create({screen:{flex:1},backdrop:{flex:1,justifyContent:"center",alignItems:"center"},modalContainer:{width:.75*Gr,height:.75*Gr,backgroundColor:"#121212EE",padding:20,borderRadius:30},modal:{width:"100%",height:"100%",alignItems:"center",justifyContent:"space-between"},actions:{flexDirection:"row",width:"50%",justifyContent:"space-evenly"}}),Wr=r(4018),$r=r(8576),Jr=r(6032);function Kr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Yr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Kr(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Kr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Qr=function(e){return e.FORM_CHANGE="FORM_CHANGE",e}({});const Zr=function(e){var t=(0,i.useReducer)((function(e,t){if(t.type===Qr.FORM_CHANGE){var r=Yr(Yr({},e.inputValues),{},(0,a.default)({},t.payload.input,t.payload.value)),n=Yr(Yr({},e.inputValidities),{},(0,a.default)({},t.payload.input,t.payload.isValid)),i=!0;for(var o in n)if(!1===n[o]){i=!1;break}return{formIsValid:i,inputValues:r,inputValidities:n}}return e}),{inputValues:Yr({},e),inputValidities:Object.keys(e).reduce((function(t,r){return Yr(Yr({},t),{},(0,a.default)({},r,!!e[r]))}),{}),formIsValid:!1}),r=(0,Ye.default)(t,2),n=r[0],o=r[1];return[n,(0,i.useCallback)((function(e,t,r){o({type:Qr.FORM_CHANGE,payload:{value:t,isValid:r,input:e}})}),[o])]};var Xr=r(7154),en=r(7459);const tn=function(){var e=(0,Xr.usePermissions)(),t=(0,Ye.default)(e,2),r=t[0],o=t[1];return(0,i.useCallback)((0,n.default)((function*(){var e,t;return null!=r&&r.granted||(e=(yield o()).status),(null!=r&&r.granted||"granted"===e)&&(t=(yield(0,en.default)()).data),t})),[r,o])};var rn=r(8859),nn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Something went wrong!";rn.default.alert("There's a problem",e)},on=["username"];function an(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function sn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?an(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):an(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const cn=function(){var e=(0,i.useState)(!1),t=(0,Ye.default)(e,2),r=t[0],o=t[1],a=Zr({username:"",email:"",password:""}),s=(0,Ye.default)(a,2),c=s[0],u=c.inputValues,l=c.inputValidities,d=c.formIsValid,f=s[1],h=Nt(),p=tn(),y=ne({fixedCacheKey:"shared-auth"}),g=(0,Ye.default)(y,2),m=g[0],b=g[1].isLoading,v=re({fixedCacheKey:"shared-auth"}),j=(0,Ye.default)(v,1)[0],x=function(){var e=(0,n.default)((function*(){var e=yield p(),t=(u.username,(0,Pe.default)(u,on));try{var n=yield(r?j(sn(sn({},u),{},{expoToken:e})):m(sn(sn({},t),{},{expoToken:e}))).unwrap();n.data?h(X(n.data)):nn(n.problem)}catch(i){nn()}}));return function(){return e.apply(this,arguments)}}();return(0,xe.jsx)(Oe,{children:(0,xe.jsx)(Wr.default,{behavior:"android"===Fe.default.OS?"height":"padding",style:Nr.centered,children:(0,xe.jsx)(Je,{style:un.formContainer,children:(0,xe.jsxs)($r.default,{children:[r&&(0,xe.jsx)(it,{id:"username",label:"USERNAME",value:u.username,onInputChange:f,required:!0,minLength:6,autoCapitalize:"none",error:!l.username,errorText:"Please enter a valid username."}),(0,xe.jsx)(it,{id:"email",label:"EMAIL",value:u.email,onInputChange:f,required:!0,email:!0,minLength:10,keyboardType:"email-address",autoCapitalize:"none",error:!l.email,errorText:"Please enter a valid email address."}),(0,xe.jsx)(it,{id:"password",label:"PASSWORD",value:u.password,onInputChange:f,required:!0,secureTextEntry:!0,minLength:6,autoCapitalize:"none",error:!l.password,errorText:"Please enter a valid password."}),b?(0,xe.jsx)(je.default,{style:un.loadingSpinner,children:(0,xe.jsx)(Jr.default,{size:"large",color:"orange"})}):(0,xe.jsx)(Le,{style:un.button,disabled:r?!d:!l.email||!l.password,onPress:x,children:r?"REGISTER":"LOGIN"}),(0,xe.jsx)(Le,{style:un.button,onPress:function(){return o((function(e){return!e}))},children:r?"Switch to Login":"Switch to Register"})]})})})})};var un=ve.default.create({formContainer:{backgroundColor:"#121212CC",width:"80%",maxWidth:400,maxHeight:400,padding:20},loadingSpinner:{marginTop:10},button:{marginTop:10,alignSelf:"center",paddingHorizontal:0}});const ln=function(){var e=Nt();return(0,i.useEffect)((function(){(0,n.default)((function*(){var t=null;"web"!==Fe.default.OS&&(t=yield B.getItemAsync(Y)),e(t?h(JSON.parse(t)):y())}))(),(0,n.default)((function*(){var t=yield ce.default.getItem(Q);t&&e(v(JSON.parse(t)))}))(),(0,n.default)((function*(){var t=yield ce.default.getItem(Z);t&&e(P(JSON.parse(t)))}))()}),[e]),(0,xe.jsx)(Oe,{children:(0,xe.jsx)(je.default,{style:Nr.centered,children:(0,xe.jsx)(Jr.default,{size:"large",color:"orange"})})})};var dn=r(6085),fn=r(2790),hn=r.n(fn),pn=function(){var e=(0,n.default)((function*(e){ce.default.setItem(Z,JSON.stringify(e))}));return function(t){return e.apply(this,arguments)}}();const yn=function(e){var t=e.navigation,n=Bt((function(e){return e.game.initialSpeed})),o=Bt((function(e){return e.settings})),a=(0,i.useState)(n||1),s=(0,Ye.default)(a,2),c=s[0],u=s[1],l=(0,i.useState)(o.sounds),d=(0,Ye.default)(l,2),f=d[0],h=d[1],p=(0,i.useState)(o.haptics),y=(0,Ye.default)(p,2),g=y[0],m=y[1],b=Nt();return(0,xe.jsx)(Oe,{children:(0,xe.jsx)($r.default,{contentContainerStyle:gn.settingsContainer,children:(0,xe.jsxs)(Je,{style:gn.settings,children:[(0,xe.jsxs)(je.default,{style:gn.setting,children:[(0,xe.jsxs)(Ee,{style:gn.label,children:["LEVEL ",c]}),(0,xe.jsx)(je.default,{children:(0,xe.jsx)(hn(),{value:c,onValueChange:function(e){u(e)},step:1,minimumValue:1,maximumValue:10,style:gn.slider,minimumTrackTintColor:ge.primary,thumbTintColor:ge.white})})]}),(0,xe.jsx)(je.default,{style:gn.noteContainer,children:(0,xe.jsx)(Ee,{style:gn.note,children:"Please note, changing the game speed will reset the game."})}),(0,xe.jsxs)(je.default,{style:gn.setting,children:[(0,xe.jsx)(Ee,{style:gn.label,children:"SOUNDS"}),(0,xe.jsx)(je.default,{children:(0,xe.jsx)(dn.default,{value:f,onValueChange:function(){h((function(e){return!e}))},trackColor:{true:ge.primary},thumbColor:ge.white})})]}),(0,xe.jsxs)(je.default,{style:gn.setting,children:[(0,xe.jsx)(Ee,{style:gn.label,children:"HAPTICS"}),(0,xe.jsx)(je.default,{children:(0,xe.jsx)(dn.default,{value:g,onValueChange:function(){m((function(e){return!e}))},trackColor:{true:ge.primary},thumbColor:ge.white})})]}),(0,xe.jsx)(Be,{style:gn.button,pressHandler:function(){b(function(e){var t=e.speed,r=e.sounds,n=e.haptics;return function(e){e(j(t)),e(P({sounds:r,haptics:n})),pn({sounds:r,haptics:n})}}({speed:c,sounds:f,haptics:g})),t.goBack()},icon:r(1915)})]})})})};var gn=ve.default.create({settingsContainer:{padding:30},settings:{padding:30,backgroundColor:ge.black,alignItems:"center"},setting:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:"100%",paddingVertical:15},label:{color:ge.white,fontSize:24},noteContainer:{paddingVertical:10,width:"100%"},note:{fontSize:18,color:"#ccc",paddingVertical:4},slider:{width:150,height:20},button:{marginTop:10}});const mn=function(e){var t=e.navigation,r=(0,i.useState)(""),o=(0,Ye.default)(r,2),a=o[0],s=o[1],c=(0,i.useState)(!1),u=(0,Ye.default)(c,2),l=u[0],d=u[1],f=(0,i.useCallback)((function(e,t,r){s(t),d(r)}),[]),h=oe(),p=(0,Ye.default)(h,1)[0],y=(0,i.useCallback)((0,n.default)((function*(){try{var e=yield p(a).unwrap();e.data?t.replace("MultiplayerGame",{gameId:e.data._id,initiator:!0}):nn(e.problem)}catch(r){nn()}})),[a]);return(0,xe.jsxs)(Fr.default,{style:bn.screen,intensity:20,children:[(0,xe.jsx)(zr.default,{style:bn.backdrop,onPress:function(){t.goBack()}}),(0,xe.jsx)(Wr.default,{behavior:"android"===Fe.default.OS?"padding":"position",style:bn.bottomContainer,children:(0,xe.jsxs)(Je,{style:bn.lobby,children:[(0,xe.jsx)(Ee,{style:bn.text,children:"Insert an username of player to challenge"}),(0,xe.jsx)(je.default,{children:(0,xe.jsx)(it,{id:"username",label:"USERNAME",value:a,onInputChange:f,required:!0,minLength:6,autoCapitalize:"none",error:!l,errorText:"Please enter a valid username."})}),(0,xe.jsx)(Le,{onPress:y,children:"Challenge"})]})})]})};var bn=ve.default.create({screen:{flex:1},backdrop:{flex:3},bottomContainer:{backgroundColor:ge.primaryLight,flex:2,width:"100%",justifyContent:"center",alignItems:"center"},lobby:{backgroundColor:ge.black,width:"75%",paddingVertical:10,paddingHorizontal:20,justifyContent:"space-between"},text:{color:"#eee",fontSize:20,textAlign:"center",paddingVertical:10}});const vn=function(e){var t=e.navigation,r=e.route,n=ae(r.params.gameId).data,o=Bt((function(e){return e.auth.userId})),a=se(),s=(0,Ye.default)(a,1)[0],c=Cr((function(){return new _r({})})),u=Wt(),l=(0,i.useCallback)((function(){c.update(),s({gameId:r.params.gameId,gameOver:c.gameOver,playerBoard:Array.from(c.board)})}),[]),d=Lt(c.speed,l,u),f=d.start,h=d.stop;(0,i.useEffect)((function(){"STARTED"===(null==n?void 0:n.gameStatus)&&f(),"FINISHED"===(null==n?void 0:n.gameStatus)&&(h(),rn.default.alert("Game over",n.winner+" win!",[{text:"Home",onPress:function(){return t.navigate("Root")},style:"destructive"}]))}),[null==n?void 0:n.gameStatus]),(0,i.useEffect)((function(){return s({gameId:r.params.gameId,gameOver:c.gameOver,playerBoard:Array.from(c.board)}),function(){s({gameId:r.params.gameId,gameOver:!0,playerBoard:Array.from(c.board)})}}),[]);var p=(0,i.useCallback)((function(e){c.inputHandler(e),u()}),[]),y=(0,i.useMemo)((function(){var e;return null!=(e=null==n?void 0:n.players.filter((function(e){return e.user!==o}))[0].board)?e:[]}),[n]);return(0,xe.jsx)(Oe,{children:(0,xe.jsx)(vr,{game:c,handleInput:p,children:(0,xe.jsx)(_t,{board:y,boardWidth:75})})})};ve.default.create({});var jn=r(9125),xn=(0,r(4209).default)();const On=function(){var e=Bt((function(e){return!!e.auth.accessToken}));return(0,xe.jsxs)(xn.Navigator,{screenOptions:{headerShown:!1,tabBarStyle:{position:"absolute",borderTopWidth:0},tabBarLabelStyle:{fontSize:16,fontFamily:"dogbyte",paddingBottom:5},tabBarActiveTintColor:"orange",tabBarInactiveTintColor:"#bbb",tabBarBackground:function(){return(0,xe.jsx)(Fr.default,{tint:"dark",intensity:40,style:{flex:1}})}},children:[(0,xe.jsx)(xn.Screen,{name:"Home",component:Sr,options:{tabBarIcon:function(e){var t=e.size,r=e.color;return(0,xe.jsx)(At.default,{name:"home",size:t,color:r})}}}),e?(0,xe.jsx)(xn.Screen,{name:"Profile",component:Br,options:{tabBarIcon:function(e){var t=e.size,r=e.color;return(0,xe.jsx)(At.default,{name:"user",size:t,color:r})},headerShown:!1}}):(0,xe.jsx)(xn.Screen,{name:"Login",component:cn,options:{tabBarIcon:function(e){var t=e.size,r=e.color;return(0,xe.jsx)(At.default,{name:"sign-in",size:t,color:r})}}})]})};var wn=(0,jn.default)();const Pn=function(){return(0,xe.jsxs)(wn.Navigator,{children:[(0,xe.jsx)(wn.Screen,{name:"Root",component:On,options:{headerShown:!1}}),(0,xe.jsx)(wn.Screen,{name:"Singleplayer",component:Lr}),(0,xe.jsx)(wn.Screen,{name:"GameModal",component:qr,options:{presentation:"transparentModal",headerShown:!1,animation:"none"}}),(0,xe.jsx)(wn.Screen,{name:"Leaderboard",component:Hr}),(0,xe.jsx)(wn.Screen,{name:"MultiplayerLobby",component:mn,options:{presentation:"transparentModal",headerShown:!1,animation:"fade"}}),(0,xe.jsx)(wn.Screen,{name:"MultiplayerGame",component:vn}),(0,xe.jsx)(wn.Screen,{name:"Settings",component:yn,options:{headerTitle:"SETTINGS",headerStyle:{backgroundColor:ge.primaryDark},headerTitleStyle:{fontSize:24,fontFamily:"dogbyte"},headerTintColor:ge.white}})]})};var Sn=r(5136);const kn=function(){var e=(0,i.useRef)(null),t=Bt((function(e){return!!e.auth.didTryLogin})),r=Bt((function(e){return!!e.auth.accessToken}));return(0,i.useEffect)((function(){if(r){var t=Sn.addNotificationResponseReceivedListener((function(t){var r,n=t.notification.request.content.data;"gameId"in n&&"string"===typeof n.gameId&&(null==(r=e.current)||r.navigate("MultiplayerGame",{gameId:n.gameId,initiator:!1}))}));return function(){t.remove()}}}),[r]),(0,xe.jsx)(he.default,{ref:e,children:t?(0,xe.jsx)(Pn,{}):(0,xe.jsx)(ln,{})})};var Cn=r(8749);function In(){return(0,xe.jsx)(o.Provider,{store:fe,children:(0,xe.jsx)(sr,{children:(0,xe.jsx)(kn,{})})})}"web"!==Fe.default.OS&&new Promise((function(e,t){A.transaction((function(r){r.executeSql("            CREATE TABLE IF NOT EXISTS scores (                _id INTEGER PRIMARY KEY,                 username TEXT NOT NULL,                 score INTEGER NOT NULL             );",[],(function(){e(!0)}),(function(e,r){return t(r),!1}))}))})).then((function(){console.log("Initialized db success.")})).catch((function(e){console.log("Initialized db failed."),console.log(e)})),Cn.setNotificationHandler({handleNotification:function(){var e=(0,n.default)((function*(){return{shouldShowAlert:!0,shouldPlaySound:!0,shouldSetBadge:!0}}));return function(){return e.apply(this,arguments)}}()})},1753:(e,t,r)=>{e.exports=r.p+"static/media/dogbyte.57b4a9fc13399c184d98.otf"},496:(e,t,r)=>{e.exports=r.p+"static/media/1.9e5448f0ff23062ed1f8.mp3"},7096:(e,t,r)=>{e.exports=r.p+"static/media/10.503b5d06d20afcb8ebcd.mp3"},2618:(e,t,r)=>{e.exports=r.p+"static/media/11.60240f4ef5de6806053f.mp3"},2976:(e,t,r)=>{e.exports=r.p+"static/media/2.f6683debab2372d5413d.mp3"},7434:(e,t,r)=>{e.exports=r.p+"static/media/3.b3c0cfc659997b15729a.mp3"},9163:(e,t,r)=>{e.exports=r.p+"static/media/4.4fd2c8beab86c1a97b34.mp3"},1309:(e,t,r)=>{e.exports=r.p+"static/media/5.acc83717048193639235.mp3"},7304:(e,t,r)=>{e.exports=r.p+"static/media/6.11b9fa5e91fdc51c4743.mp3"},6704:(e,t,r)=>{e.exports=r.p+"static/media/7.663e7a140d75a0c539f5.mp3"},8740:(e,t,r)=>{e.exports=r.p+"static/media/8.51125fe4e80f5942fe14.mp3"},2499:(e,t,r)=>{e.exports=r.p+"static/media/9.be7a7c57501f45f42074.mp3"},9718:(e,t,r)=>{e.exports=r.p+"static/media/blocks.a307cb9687beb7e71d91.png"},5489:(e,t,r)=>{e.exports=r.p+"static/media/escape.5d7250728f52729bb797.png"},371:(e,t,r)=>{e.exports=r.p+"static/media/lvl.071eacba47cc3b2faf0a.png"},5900:(e,t,r)=>{e.exports=r.p+"static/media/pause.4bd96f4489319d841178.png"},2487:(e,t,r)=>{e.exports=r.p+"static/media/play.560179b467ed1fcee17a.png"},3433:(e,t,r)=>{e.exports=r.p+"static/media/replay.092a3228e1b5bdd03ce6.png"},1915:(e,t,r)=>{e.exports=r.p+"static/media/submit.c4e71662db4568ae125b.png"},7152:(e,t,r)=>{e.exports=r.p+"static/media/trophy.269221212b70985da365.png"}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}r.m=e,(()=>{var e=[];r.O=(t,n,i,o)=>{if(!n){var a=1/0;for(l=0;l<e.length;l++){for(var[n,i,o]=e[l],s=!0,c=0;c<n.length;c++)(!1&o||a>=o)&&Object.keys(r.O).every((e=>r.O[e](n[c])))?n.splice(c--,1):(s=!1,o<a&&(a=o));if(s){e.splice(l--,1);var u=i();void 0!==u&&(t=u)}}return t}o=o||0;for(var l=e.length;l>0&&e[l-1][2]>o;l--)e[l]=e[l-1];e[l]=[n,i,o]}})(),r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;r.t=function(n,i){if(1&i&&(n=this(n)),8&i)return n;if("object"===typeof n&&n){if(4&i&&n.__esModule)return n;if(16&i&&"function"===typeof n.then)return n}var o=Object.create(null);r.r(o);var a={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&n;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>a[e]=()=>n[e]));return a.default=()=>n,r.d(o,a),o}})(),r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="/github.io/buildie/",(()=>{var e={179:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var i,o,[a,s,c]=n,u=0;if(a.some((t=>0!==e[t]))){for(i in s)r.o(s,i)&&(r.m[i]=s[i]);if(c)var l=c(r)}for(t&&t(n);u<a.length;u++)o=a[u],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return r.O(l)},n=self.webpackChunkweb=self.webpackChunkweb||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var n=r.O(void 0,[242],(()=>r(9386)));n=r.O(n)})();
//# sourceMappingURL=main.35f7829a.js.map