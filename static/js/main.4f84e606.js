(()=>{"use strict";var e={9141:(e,t,r)=>{r.r(t),r.d(t,{default:()=>En});var n=r(5861),i=r(9526),o=r(2070),a=r(4942),s=r(1074);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var l={userId:null,accessToken:null,refreshToken:null,didTryLogin:!1},d=(0,s.createSlice)({name:"auth",initialState:l,reducers:{setDidTryToLogin:function(e){return u(u({},e),{},{didTryLogin:!0})},login:function(e,t){var r=t.payload;return{userId:r.userId,accessToken:r.accessToken,refreshToken:r.refreshToken,didTryLogin:!0}},logout:function(){return u(u({},l),{},{didTryLogin:!0})}}}),f=d.actions,h=f.login,p=f.logout,y=f.setDidTryToLogin;const g=d.reducer;var m=(0,s.createSlice)({name:"gameState",initialState:{},reducers:{setGameState:function(e,t){return t.payload},setGameSpeed:function(e,t){return{initialSpeed:t.payload}},resetGameState:function(e){return{initialSpeed:e.initialSpeed}}}}),b=m.actions,v=b.setGameState,j=b.setGameSpeed,x=b.resetGameState;const O=m.reducer;var w=(0,s.createSlice)({name:"settings",initialState:{sounds:!1,haptics:!1},reducers:{setSettings:function(e,t){return t.payload}}}),P=w.actions.setSettings;const S=w.reducer;var k,C=r(767),I=r(7132);"web"!=I.default.OS&&(k=C.openDatabase("buildie.db"));var E,T,D,_,R,L,A,H,M,N=r(3694),B=r(2818),V=r(5235),z=r(7216),F=r(1880),G=(0,B.gql)(E||(E=(0,F.default)(["\n  mutation ($input: SignupInput!) {\n    signup(input: $input) {\n      data {\n        accessToken\n        refreshToken\n        userId\n      }\n      problem\n    }\n  }\n"]))),q=(0,B.gql)(T||(T=(0,F.default)(["\n  mutation ($input: SigninInput!) {\n    signin(input: $input) {\n      data {\n        accessToken\n        refreshToken\n        userId\n      }\n      problem\n    }\n  }\n"]))),U=(0,B.gql)(D||(D=(0,F.default)(["\n  mutation ($refreshToken: String!) {\n    refreshToken(refreshToken: $refreshToken) {\n      userId\n      refreshToken\n      accessToken\n    }\n  }\n"]))),W=(0,B.gql)(_||(_=(0,F.default)(["\n  mutation ($refreshToken: String!) {\n    invalidateRefreshToken(refreshToken: $refreshToken)\n  }\n"]))),$=(0,B.gql)(R||(R=(0,F.default)(["\n  query {\n    scores {\n      _id\n      score\n      username\n    }\n  }\n"]))),J=(0,B.gql)(L||(L=(0,F.default)(["\n  mutation ($score: Int!) {\n    submitScore(score: $score) {\n      data {\n        _id\n        score\n        username\n      }\n      problem\n    }\n  }\n"]))),K=(0,B.gql)(A||(A=(0,F.default)(["\n  mutation ($username: String!) {\n    createGame(username: $username) {\n      data {\n        _id\n      }\n      problem\n    }\n  }\n"]))),Y=(0,B.gql)(H||(H=(0,F.default)(["\n  mutation ($gameId: ID!, $gameOver: Boolean!, $playerBoard: [Int!]!) {\n    updateGame(\n      gameId: $gameId\n      gameOver: $gameOver\n      playerBoard: $playerBoard\n    ) {\n      data {\n        gameStatus\n        players {\n          user\n          board\n        }\n      }\n      problem\n    }\n  }\n"]))),Q=(0,B.gql)(M||(M=(0,F.default)(["\n  query ($gameId: String!) {\n    game(gameId: $gameId) {\n      gameStatus\n      players {\n        user\n        board\n      }\n    }\n  }\n"]))),Z="userData",X="gameState",ee="settings",te=function(e){return function(){var t=(0,n.default)((function*(t){var r;t(h(e)),r=e,z.setItemAsync(Z,JSON.stringify(r))}));return function(e){return t.apply(this,arguments)}}()},re=function(){return function(e,t){var r=t().auth.refreshToken;z.deleteItemAsync(Z),e(ne.endpoints.logout.initiate(r)),e(p())}},ne=(0,N.createApi)({reducerPath:"gameApi",baseQuery:function(e){var t=e.baseUrl,r=e.prepareHeaders,i=void 0===r?function(e){return e}:r;return function(){var e=(0,n.default)((function*(e,r){var n=e.body,o=e.variables,a=r.getState,s=r.dispatch;function c(){return i(new Headers,{getState:a,dispatch:s})}try{return{data:yield(0,B.request)(t,n,o,yield c())}}catch(f){if(f instanceof B.ClientError){var u;if(null!=(u=f.response.errors)&&u.some((function(e){var t;return"UNAUTHENTICATED"===(null==(t=e.extensions)?void 0:t.code)})))try{var l=a().auth.refreshToken,d=yield(0,B.request)(t,U,{refreshToken:l});return s(te(d.refreshToken)),{data:yield(0,B.request)(t,n,o,yield c())}}catch(f){return s(re()),{error:{name:"REFRESH_TOKEN",message:"Invalid or expired refresh token"}}}return{error:{name:f.name,message:f.message,stack:f.stack}}}if(f instanceof Error)return{error:{name:"Error",message:f.message}};throw f}}));return function(t,r){return e.apply(this,arguments)}}()}({baseUrl:"http:/192.168.178.90:4000/graphql",prepareHeaders:function(e,t){var r=(0,t.getState)().auth.accessToken;return r&&e.set("authorization","Bearer "+r),e}}),tagTypes:["Scores"],endpoints:function(e){return{signup:e.mutation({query:function(e){return{body:G,variables:{input:e}}},transformResponse:function(e){return e.signup}}),signin:e.mutation({query:function(e){return{body:q,variables:{input:e}}},transformResponse:function(e){return e.signin}}),logout:e.mutation({query:function(e){return{body:W,variables:{refreshToken:e}}}}),scores:e.query({query:function(){return{body:$}},transformResponse:function(e){return e.scores},providesTags:function(){return["Scores"]}}),submitScore:e.mutation({query:function(e){return{body:J,variables:{score:e}}},transformResponse:function(e){return e.submitScore},invalidatesTags:["Scores"]}),createGame:e.mutation({query:function(e){return{body:K,variables:{username:e}}},transformResponse:function(e){return e.createGame}}),game:e.query({query:function(e){return{body:Q,variables:{gameId:e}}},transformResponse:function(e){return e.game},onCacheEntryAdded:function(){var e=(0,n.default)((function*(e,t){var r=t.updateCachedData,n=t.cacheDataLoaded,i=t.cacheEntryRemoved,o=(0,V.createClient)({url:"ws://192.168.178.90:4000/graphql"});try{yield n,yield new Promise((function(t,n){o.subscribe({query:'subscription { gameUpdate(gameId: "'+e+'") { gameStatus winner players { user board } } }'},{next:function(e){r((function(){return e.data.gameUpdate}))},error:n,complete:function(){return t}})}))}catch(a){console.log(a)}yield i,o.dispose()}));return function(t,r){return e.apply(this,arguments)}}()}),updateGame:e.mutation({query:function(e){return{body:Y,variables:{gameId:e.gameId,gameOver:e.gameOver,playerBoard:e.playerBoard}}},transformResponse:function(e){return e.updateGame}})}}}),ie=ne.useSignupMutation,oe=ne.useSigninMutation,ae=ne.useScoresQuery,se=ne.useCreateGameMutation,ce=ne.useGameQuery,ue=ne.useUpdateGameMutation,le=r(5519),de=(0,s.createAsyncThunk)("scores/loadScores",function(){var e=(0,n.default)((function*(e,t){var r=t.rejectWithValue;try{return(yield new Promise((function(e,t){k.transaction((function(r){r.executeSql("SELECT * FROM scores WHERE score > 0 ORDER BY score DESC",[],(function(t,r){e(r)}),(function(e,r){return t(r),!1}))}))}))).rows._array}catch(n){return r(n)}}));return function(t,r){return e.apply(this,arguments)}}()),fe=(0,s.createAsyncThunk)("scores/submitScore",function(){var e=(0,n.default)((function*(e,t){var r=t.dispatch,n=t.rejectWithValue;r(ne.endpoints.submitScore.initiate(e.score));try{var i=yield function(e){return new Promise((function(t,r){k.transaction((function(n){n.executeSql("INSERT INTO scores (username, score) VALUES (?, ?);",[e.username,e.score],(function(e,r){t(r)}),(function(e,t){return r(t),!1}))}))}))}(e);return{_id:i.insertId.toString(),score:e.score,username:e.username}}catch(o){return n(o)}finally{le.default.removeItem(X),r(x())}}));return function(t,r){return e.apply(this,arguments)}}());const he=(0,s.createSlice)({name:"scores",initialState:{localScores:[]},reducers:{},extraReducers:function(e){e.addCase(fe.fulfilled,(function(e,t){var r=t.payload;e.localScores=e.localScores.concat(r)})),e.addCase(de.fulfilled,(function(e,t){var r=t.payload;e.localScores=r}))}}).reducer;const pe=(0,s.configureStore)({reducer:(0,a.default)({auth:g,game:O,settings:S,scores:he},ne.reducerPath,ne.reducer),middleware:function(e){return e().concat(ne.middleware)}});var ye=r(5693),ge=r(2982),me={"-1":"transparent",0:"#000000",1:"#66CCFF",2:"#FFD500",3:"#FF971C",4:"#0341AE",5:"#72CB3B",6:"#FF3213",7:"#AA00FF",9:"#808080"},be=function(e){return e.black="#121212EE",e.white="#eee",e.primary="#3b5998",e.primaryLight="#4c669f",e.primaryDark="#192f6a",e.secondary="orange",e.error="#B00020",e}({}),ve=r(5567),je=r(3292),xe=r(4333),Oe=r(1133),we=r(7557);const Pe=function(e){var t=e.children;return(0,we.jsxs)(Oe.default,{style:Se.screen,children:[(0,we.jsx)(je.default,{style:"light"}),(0,we.jsx)(ve.LinearGradient,{style:Se.background,colors:[be.primaryLight,be.primary,be.primaryDark]}),t]})};var Se=xe.default.create({screen:{flex:1},background:{position:"absolute",left:0,right:0,top:0,bottom:0}}),ke=r(5987),Ce=r(1451),Ie=r(9233);function Ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const De=function(e){var t=e.children,r=e.style;return(0,we.jsx)(Ie.default,{style:Te(Te({},_e.text),r),children:t})};var _e=xe.default.create({text:{fontFamily:"dogbyte"}}),Re=["children","style","textStyle"];function Le(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Le(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const He=function(e){var t=e.children,r=e.style,n=e.textStyle,i=(0,ke.default)(e,Re);return(0,we.jsx)(Ce.default,Ae(Ae({style:[Me.button,r],activeOpacity:.6},i),{},{children:(0,we.jsxs)(Oe.default,{style:Me.buttonTextContainer,children:[i.disabled&&(0,we.jsx)(Oe.default,{style:Me.lineContainer,children:(0,we.jsx)(Oe.default,{style:Me.line})}),(0,we.jsx)(De,{style:Ae(Ae({},Me.buttonText),n),children:t})]})}))};var Me=xe.default.create({button:{paddingVertical:12,paddingHorizontal:30,borderRadius:25},lineContainer:{position:"absolute",top:0,bottom:0,left:0,right:0,justifyContent:"center",zIndex:1},line:{borderBottomWidth:4,borderColor:"red"},buttonTextContainer:{alignSelf:"center"},buttonText:{color:"white",paddingVertical:5,fontSize:26}}),Ne=r(9899);function Be(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ve(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Be(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const ze=i.memo((function(e){var t=e.pressHandler,r=e.icon,n=e.style;return(0,we.jsx)(Ce.default,{onPress:t,style:Ve(Ve({},Fe.button),n),children:(0,we.jsx)(Ne.default,{style:Fe.icon,resizeMode:"cover",source:r})})}));var Fe=xe.default.create({button:{width:50,height:50},icon:{width:"100%",height:"100%"}}),Ge=r(6337),qe=r(5648);const Ue=i.memo((function(e){var t=e.gameMode,r=e.setGameModeHandler;return(0,we.jsx)(Oe.default,{style:We.leaderboardHeaderContainer,children:(0,we.jsxs)(Oe.default,{style:We.leaderboardHeader,children:[(0,we.jsx)(Oe.default,{style:We.titleContainer,children:(0,we.jsx)(De,{style:We.title,children:"HIGHSCORES"})}),(0,we.jsxs)(Oe.default,{style:We.gameModeContainer,children:[(0,we.jsx)(He,{style:[We.gameMode,"LOCAL"===t&&We.selectedGameMode],textStyle:{color:"LOCAL"===t?"black":"white"},onPress:function(){r("LOCAL")},children:"LOCAL"}),(0,we.jsx)(He,{style:[We.gameMode,"ONLINE"===t&&We.selectedGameMode],textStyle:{color:"ONLINE"===t?"black":"white"},onPress:function(){r("ONLINE")},children:"ONLINE"})]})]})})}));var We=xe.default.create({leaderboardHeaderContainer:{paddingTop:"android"===I.default.OS?qe.default.currentHeight:0,backgroundColor:"#000"},leaderboardHeader:{justifyContent:"flex-end",alignItems:"center",backgroundColor:"#000",height:.2*Ge.default.get("window").height},titleContainer:{flexDirection:"row",alignItems:"center"},title:{color:"white",fontSize:60},gameModeContainer:{flexDirection:"row",paddingVertical:10},gameMode:{flex:1,backgroundColor:"black"},selectedGameMode:{backgroundColor:"white",borderRadius:10}});function $e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Je(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$e(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$e(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const Ke=function(e){var t=e.children,r=e.style;return(0,we.jsx)(Oe.default,{style:Je(Je({},Ye.card),r),children:t})};var Ye=xe.default.create({card:{backgroundColor:"white",borderRadius:12,shadowColor:"black",shadowOpacity:.26,shadowOffset:{width:0,height:2},shadowRadius:8,elevation:5}}),Qe=r(885),Ze=r(3497);function Xe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function et(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xe(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var tt=function(e){return e.INPUT_CHANGE="INPUT_CHANGE",e.INPUT_BLUR="INPUT_BLUR",e}({}),rt=function(e,t){switch(t.type){case tt.INPUT_CHANGE:return et(et({},e),{},{value:t.value,isValid:t.isValid});case tt.INPUT_BLUR:return et(et({},e),{},{touched:!0});default:return e}};function nt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function it(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const ot=i.memo((function(e){var t,r,n=(0,i.useReducer)(rt,{value:null!=(t=null==e?void 0:e.initialValue)?t:"",isValid:null!=(r=null==e?void 0:e.initiallyValid)&&r,touched:!1}),o=(0,Qe.default)(n,2),a=o[0],s=o[1],c=e.id,u=e.onInputChange;(0,i.useEffect)((function(){a.touched&&u(e.id,a.value,a.isValid)}),[c,a,u]);return(0,we.jsxs)(Oe.default,{style:at.control,children:[(0,we.jsx)(De,{style:at.label,children:e.label}),(0,we.jsx)(Ze.default,it(it({},e),{},{style:at.input,value:a.value,onChangeText:function(t){var r=!0;e.required&&0===t.trim().length&&(r=!1),e.email&&!/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t.toLowerCase())&&(r=!1),null!=e.min&&+t<e.min&&(r=!1),null!=e.max&&+t>e.max&&(r=!1),null!=e.minLength&&t.length<e.minLength&&(r=!1),s({type:tt.INPUT_CHANGE,value:t,isValid:r})},onBlur:function(){s({type:tt.INPUT_BLUR})}})),!a.isValid&&a.touched&&(0,we.jsx)(Oe.default,{style:at.errorContainer,children:(0,we.jsx)(De,{style:at.error,children:e.errorText})})]})}));var at=xe.default.create({control:{width:"100%"},label:{color:"#ccc",fontSize:18,marginVertical:8},input:{paddingHorizontal:2,paddingVertical:5,borderBottomColor:"#ccc",borderBottomWidth:1,fontSize:18,color:"white"},errorContainer:{marginVertical:5},error:{color:"red",fontSize:18}}),st=r(7447);const ct=JSON.parse('{"I":"0000111100000000","O":"0000022002200000","L":"0000033303000000","J":"0000044400040000","S":"0000005505500000","Z":"0000066000660000","T":"0000077700700000"}');function ut(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function lt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ut(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ut(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const dt=i.memo((function(e){var t=e.type,r=e.width,n=e.border;return(0,we.jsx)(Oe.default,{style:lt(lt({},ft.cell),{borderBottomWidth:n?2:0,borderColor:n?"black":"",width:r,height:r,backgroundColor:me[t]})})}));var ft=xe.default.create({cell:{}});function ht(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ht(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ht(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var yt=.15*Ge.default.get("window").width;const gt=i.memo((function(e){var t=e.title,r=e.piece,n=e.transparentBackground,i=r&&(0,ge.default)(r).map((function(e,t){return(0,we.jsx)(dt,{type:0===+e&&n?-1:+e,width:yt/4,border:!n},"h_"+t)}));return(0,we.jsxs)(we.Fragment,{children:[(0,we.jsx)(De,{style:mt.title,children:t}),(0,we.jsx)(Oe.default,{style:pt(pt({},mt.pieceContainer),{borderColor:n?"":"grey",borderWidth:n?0:2}),children:(0,we.jsx)(Oe.default,{style:pt(pt({},mt.piece),{backgroundColor:n?"":"#000"}),children:i})})]})}));var mt=xe.default.create({pieceContainer:{marginBottom:10},title:{color:"#bbb",fontSize:18,textAlign:"center"},piece:{width:yt,height:yt,flexDirection:"row",flexWrap:"wrap"}}),bt=Ge.default.get("window").height-yt,vt=Ge.default.get("window").width-yt;const jt=function(e){var t=e.children,r=(0,i.useRef)(Object.values(ct)).current,n=(0,i.useState)(Math.floor(Math.random()*vt)),o=(0,Qe.default)(n,2),a=o[0],s=o[1],c=(0,i.useRef)(new st.default.Value(0)).current;return(0,i.useEffect)((function(){!function e(){st.default.timing(c,{toValue:bt,duration:4e3,useNativeDriver:!0}).start((function(t){t.finished&&(s(Math.floor(Math.random()*vt)),c.setValue(0),e())}))}()}),[]),(0,we.jsxs)(Pe,{children:[(0,we.jsx)(st.default.View,{style:{left:a,transform:[{translateY:c}]},children:(0,we.jsx)(gt,{piece:r[Math.floor(Math.random()*r.length)],transparentBackground:!0})}),t]})};xe.default.create({animatedPiece:{position:"absolute",top:0}});var xt=r(5671),Ot=r(3144),wt=r(6274),Pt=r(9359);const St={0:1,1:100,2:300,3:500,4:800};var kt=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;(0,xt.default)(this,e),this._initialSpeed=r,this._speed=r,this._lines=n,this._score=i,this._board=null!=t?t:this.init()}return(0,Ot.default)(e,[{key:"board",get:function(){return this._board}},{key:"lines",get:function(){return this._lines}},{key:"speed",get:function(){return this._speed}},{key:"score",get:function(){return this._score}},{key:"init",value:function(){for(var t=new Uint8Array(e.h*e.w),r=0;r<e.h;r+=1)for(var n=0;n<e.w;n+=1)t[r*e.w+n]=0===n||n===e.w-1||r===e.h-1?9:0;return t}},{key:"clearLines",value:function(t){for(var r=0,n=t;n<e.h-1;n+=1){for(var i=!0,o=0;o<e.w;o+=1)if(0===this._board[n*e.w+o]||void 0===this._board[n*e.w+o]){i=!1;break}if(i){for(var a=n;a>0;a-=1)for(var s=1;s<e.w-1;s+=1)this.board[a*e.w+s]=this.board[(a-1)*e.w+s];r++,this._lines++}}this._score+=this.speed*r*St[r],this._speed=Math.floor((this.lines+10)/10)+(this._initialSpeed-1)}},{key:"reset",value:function(){this._score=0,this._lines=0,this._speed=this._initialSpeed,this._board=this.init()}}]),e}();kt.w=12,kt.h=24;const Ct=kt;var It=(0,Pt.default)("board"),Et=function(){function e(t,r){(0,xt.default)(this,e),Object.defineProperty(this,It,{writable:!0,value:void 0}),this.x=t.x,this.y=t.y,this.r=t.r,this._shape=t,(0,wt.default)(this,It)[It]=r,this.collided=!1}return(0,Ot.default)(e,[{key:"shape",get:function(){return this._shape.shape}},{key:"board",get:function(){return(0,wt.default)(this,It)[It].board}},{key:"reset",value:function(){this.x=this._shape.x,this.y=this._shape.y,this.r=this._shape.r,this.collided=!1}},{key:"rotate",value:function(t,r,n){switch(n%4){case 1:return e.w*(e.w-1)+r-e.w*t;case 2:return e.w*e.w-1-e.w*r-t;case 3:return e.w-1-r+e.w*t;default:return e.w*r+t}}},{key:"collides",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.x,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.y,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.r,i=0;i<e.w;i+=1)for(var o=0;o<e.w;o+=1)if(0!==+this.shape[this.rotate(o,i,n)]&&0!==this.board[(i+r)*Ct.w+(o+t)])return!0;return!1}},{key:"lock",value:function(){for(var t=0;t<e.w;t+=1)for(var r=0;r<e.w;r+=1)0!==+this.shape[this.rotate(r,t,this.r)]&&(this.board[(t+this.y)*Ct.w+(r+this.x)]=+this.shape[this.rotate(r,t,this.r)])}},{key:"moveDown",value:function(){if(this.collides(this.x,this.y+1))return this.collided=!0,this.lock(),void(0,wt.default)(this,It)[It].clearLines(this.y);this.y+=1}},{key:"moveLeft",value:function(){this.x-=this.collides(this.x-1)?0:1}},{key:"moveRight",value:function(){this.x+=this.collides(this.x+1)?0:1}},{key:"wallKick",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return!this.collides(this.x+e,this.y,this.r+1)||e<-1||e>1?e:this.wallKick(e+=this.x>Ct.w/2?-1:1)}},{key:"rotateRight",value:function(){var e=this.wallKick();this.collides(this.x+this.wallKick(),this.y,this.r+1)||(this.x+=e,this.r+=1)}},{key:"hardDrop",value:function(){for(;!this.collided;)this.moveDown()}}]),e}();Et.w=4;const Tt=Et;function Dt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _t(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Dt(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const Rt=function(e){var t=e.currPiece,r=e.board,n=e.boardWidth,o=e.border,a=(0,i.useMemo)((function(){return Math.floor(n/Ct.w)}),[]),s=(0,i.useMemo)((function(){return r.map((function(e,t){return(0,we.jsx)(dt,{type:e,width:a,border:o},"b_"+t)}))}),[r]),c=(0,i.useCallback)((function(e,t,r){for(var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=0;i<Tt.w;i+=1)for(var s=0;s<Tt.w;s+=1){var c=(r+i)*Ct.w+(t.x+s),u=t.rotate(s,i,t.r);0!==+t.shape[u]&&(e[c]=(0,we.jsx)(dt,{type:n?8:+t.shape[u],width:a,border:o},"b_"+c))}}),[]),u=(0,i.useCallback)((function(e,t){for(var r=(0,ge.default)(e),n=null,i=Ct.h-2;i>t.y;i-=1)t.collides(t.x,i)&&(n=i-1);return n&&c(r,t,n,!0),c(r,t,t.y),r}),[]);return(0,we.jsx)(Oe.default,{style:Lt.gridContainer,children:(0,we.jsx)(Oe.default,{style:_t(_t({},Lt.grid),{},{width:n}),children:t?u(s,t):s})})};var Lt=xe.default.create({gridContainer:{justifyContent:"center",alignItems:"center"},grid:{flexDirection:"row",flexWrap:"wrap"}});const At=function(e,t,r){var n=(0,i.useRef)(null),o=(0,i.useMemo)((function(){return 1e3/e}),[e]),a=(0,i.useRef)(performance.now()),s=(0,i.useRef)(0),c=(0,i.useRef)(!1),u=function e(i){var c=i-a.current;a.current=i,s.current+=c;for(var u=0;s.current>=o;)if(t(),s.current-=o,++u>240){s.current=0;break}u&&r(),n.current=requestAnimationFrame(e)};return{start:(0,i.useCallback)((function(){c.current||(c.current=!0,a.current=performance.now(),s.current=0,n.current=requestAnimationFrame(u))}),[c.current,e]),stop:(0,i.useCallback)((function(){c.current=!1,n.current&&cancelAnimationFrame(n.current)}),[])}};var Ht=r(7990),Mt=r(4069),Nt=r(8803),Bt=function(){return(0,o.useDispatch)()},Vt=o.useSelector;const zt=function(e){var t=e.pressHandler,r=e.icon,n=e.feedback,o=void 0===n?"light":n,a=(0,i.useRef)(null),s=Vt((function(e){return e.settings.haptics}));return(0,we.jsx)(Oe.default,{style:Ft.buttonContainer,children:(0,we.jsx)(Ce.default,{onPressIn:function e(){if(s)if("medium"===o)Mt.impactAsync(Nt.ImpactFeedbackStyle.Medium);else Mt.selectionAsync();t(),a.current=setTimeout(e,150)},onPressOut:function(){clearTimeout(a.current)},style:Ft.joystickButton,children:(0,we.jsx)(Ht.default,{name:r,size:24,color:"rgba(0,0,0, 0.8)"})})})};var Ft=xe.default.create({buttonContainer:{justifyContent:"center",alignItems:"center",margin:5},joystickButton:{justifyContent:"center",alignItems:"center",backgroundColor:"orange",width:60,height:60,borderWidth:2,borderColor:"black",borderRadius:30,shadowRadius:.5,shadowOffset:{width:0,height:2},shadowOpacity:.5}}),Gt=function(e){return e.MoveLeft="MOVE_LEFT",e.MoveRight="MOVE_RIGHT",e.MoveDown="MOVE_DOWN",e.RotateRight="ROTATE_RIGHT",e.RotateLeft="ROTATE_LEFT",e.HardDrop="HARD_DROP",e.HoldPiece="HOLD_PIECE",e}(Gt||{});const qt=Gt;const Ut=i.memo((function(e){var t=e.handleInput;return(0,we.jsxs)(Oe.default,{style:Wt.joystick,children:[(0,we.jsxs)(Oe.default,{style:Wt.joystickArrows,children:[(0,we.jsx)(zt,{icon:"arrow-up",pressHandler:function(){return t(qt.HardDrop)},feedback:"medium"}),(0,we.jsxs)(Oe.default,{style:Wt.joystickArrowsContainer,children:[(0,we.jsx)(zt,{icon:"arrow-left",pressHandler:function(){return t(qt.MoveLeft)}}),(0,we.jsx)(zt,{icon:"arrow-down",pressHandler:function(){return t(qt.MoveDown)}}),(0,we.jsx)(zt,{icon:"arrow-right",pressHandler:function(){return t(qt.MoveRight)}})]})]}),(0,we.jsxs)(Oe.default,{style:Wt.joystickButtons,children:[(0,we.jsx)(zt,{icon:"exchange",pressHandler:function(){return t(qt.HoldPiece)}}),(0,we.jsx)(zt,{icon:"rotate-right",pressHandler:function(){return t(qt.RotateRight)}})]})]})}));var Wt=xe.default.create({joystick:{height:.2*Ge.default.get("window").height,flexDirection:"row",justifyContent:"center",alignItems:"center",marginBottom:10},joystickArrows:{flex:2},joystickArrowsContainer:{flexDirection:"row",justifyContent:"center"},joystickButtons:{flex:1}});const $t=function(){var e=(0,i.useState)(!1)[1];return(0,i.useCallback)((function(){e((function(e){return!e}))}),[])};var Jt=r(2727);const Kt=i.memo((function(e){var t=e.title,r=e.statistic,n=e.icon;return(0,we.jsxs)(Oe.default,{style:Yt.gameStatisticContainer,children:[(0,we.jsx)(Oe.default,{style:Yt.gameStatistic,children:(0,we.jsx)(Oe.default,{style:Yt.iconContainer,children:(0,we.jsx)(Ne.default,{style:Yt.icon,resizeMode:"cover",source:n})})}),(0,we.jsx)(De,{style:Yt.title,children:t}),(0,we.jsx)(De,{style:Yt.text,children:r})]})}));var Yt=xe.default.create({gameStatisticContainer:{flex:1,justifyContent:"flex-end",alignItems:"center",marginBottom:5},gameStatistic:{width:"100%",flexDirection:"column",alignItems:"center",justifyContent:"space-evenly"},iconContainer:{height:30,width:30},icon:{width:"100%",height:"100%"},title:{fontSize:25,color:"#ccc"},text:{fontSize:25,color:"#eee",marginTop:5}});const Qt=function(e){var t=e.speed,n=e.lines,i=e.score;return(0,we.jsx)(Oe.default,{style:Zt.gameHeaderContainer,children:(0,we.jsxs)(Oe.default,{style:Zt.gameHeader,children:[(0,we.jsx)(Kt,{title:"Level",statistic:t,icon:r(371)}),(0,we.jsx)(Kt,{title:"Lines",statistic:n,icon:r(9718)}),(0,we.jsx)(Kt,{title:"Score",statistic:i,icon:r(7152)})]})})};var Zt=xe.default.create({gameHeaderContainer:{paddingTop:"android"===I.default.OS?qe.default.currentHeight:0,backgroundColor:"#000"},gameHeader:{flexDirection:"row",height:.14*Ge.default.get("window").height,width:"100%",borderBottomWidth:2,borderColor:"grey",backgroundColor:"#000"}}),Xt=r(213);const er=[r(496),r(2976),r(7434),r(9163),r(1309),r(7304),r(6704),r(8740),r(2499),r(7096),r(2618)];const tr=function(){var e=(0,i.useRef)(new Array(er.length)).current,t=(0,i.useRef)(null),r=(0,i.useState)(!0),o=(0,Qe.default)(r,2),a=o[0],s=o[1],c=(0,i.useState)(!1),u=(0,Qe.default)(c,2),l=u[0],d=u[1],f=Vt((function(e){return e.settings.sounds})),h=(0,i.useCallback)(function(){var r=(0,n.default)((function*(r){if(f)try{t.current=e[r],yield t.current.playFromPositionAsync(0),d(!1)}catch(n){console.log(n)}}));return function(e){return r.apply(this,arguments)}}(),[f,t.current]),p=(0,i.useCallback)((function(){f&&t.current&&t.current.stopAsync()}),[f,t.current]);return(0,i.useEffect)((function(){if(f){try{(0,n.default)((function*(){for(var t=0;t<e.length;t+=1){var r=(yield Xt.Sound.createAsync(er[t],{volume:.2},(function(e){e.didJustFinish&&d(!0)}))).sound;e[t]=r}s(!1)}))()}catch(t){console.log(t)}return function(){for(var t=0;t<e.length;t+=1)e[t]&&e[t].unloadAsync()}}}),[]),[h,p,{isLoading:a,didFinish:l}]};var rr=.3*Ge.default.get("window").height;const nr=function(e){var t=e.game,r=e.children,n=(0,Jt.useNavigation)(),o=tr(),a=(0,Qe.default)(o,3),s=a[0],c=(a[1],a[2]),u=c.isLoading,l=c.didFinish,d=$t(),f=(0,i.useCallback)((function(e){t.inputHandler(e),d()}),[]),h=(0,i.useCallback)((function(){t.update()}),[]),p=At(t.speed,h,d),y=p.start,g=p.stop;return(0,Jt.useFocusEffect)((0,i.useCallback)((function(){return t.gameOver&&t.reset(),y(),function(){g()}}),[t.speed])),(0,i.useEffect)((function(){var e=function(e){var t={ArrowLeft:function(){return f(qt.MoveLeft)},ArrowRight:function(){return f(qt.MoveRight)},ArrowUp:function(){return f(qt.HardDrop)},ArrowDown:function(){return f(qt.MoveDown)},PageUp:function(){return f(qt.RotateLeft)},PageDown:function(){return f(qt.RotateRight)},ShiftLeft:function(){return f(qt.HoldPiece)}}[e.code];null==t||t()};if("web"==I.default.OS)return window.addEventListener("keydown",e),function(){return removeEventListener("keydown",e)}}),[]),(0,i.useEffect)((function(){u||s(t.speed)}),[u,l]),(0,i.useEffect)((function(){t.gameOver&&n.navigate("GameModal",{gameOver:!0})}),[t.gameOver]),(0,i.useLayoutEffect)((function(){n.setOptions({header:function(){return(0,we.jsx)(Qt,{speed:t.speed,lines:t.lines,score:t.score})}})}),[t.speed,t.lines,t.score]),(0,we.jsxs)(Oe.default,{style:ir.gameContainer,children:[(0,we.jsxs)(Oe.default,{style:ir.game,children:[(0,we.jsx)(Rt,{currPiece:t.currPiece,board:Array.from(t.board),boardWidth:rr,border:!0}),(0,we.jsxs)(Oe.default,{style:ir.sidePanel,children:[(0,we.jsx)(gt,{title:"hold",piece:t.heldPiece}),(0,we.jsx)(gt,{title:"next",piece:t.nextPiece}),r]})]}),(0,we.jsx)(Ut,{handleInput:f})]})};var ir=xe.default.create({gameContainer:{width:"100%",height:"100%",alignItems:"center",justifyContent:"flex-end"},game:{flexDirection:"row"},sidePanel:{marginLeft:5,alignItems:"center"}}),or=r(6894),ar=r(2243),sr=function(){return or.loadAsync({dogbyte:r(1753)})};const cr=function(e){var t=e.children,r=(0,i.useState)(!1),n=(0,Qe.default)(r,2),o=n[0],a=n[1];return o?(0,we.jsx)(we.Fragment,{children:t}):(0,we.jsx)(ar.default,{startAsync:sr,onFinish:function(){return a(!0)},onError:function(e){return console.log(e)}})};function ur(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function lr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ur(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ur(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const dr=i.memo((function(e){var t=e.rank,r=e.score,n=e.name,i=e.me;return(0,we.jsxs)(Oe.default,{style:fr.score,children:[(0,we.jsx)(Oe.default,{style:fr.field,children:(0,we.jsxs)(De,{style:lr(lr({},fr.text),{},{color:i?"yellow":"white"}),children:[t,"."]})}),(0,we.jsx)(Oe.default,{style:fr.field,children:(0,we.jsx)(De,{style:lr(lr({},fr.text),{},{color:i?"yellow":"white"}),children:r})}),(0,we.jsx)(Oe.default,{style:fr.field,children:(0,we.jsx)(De,{style:lr(lr({},fr.text),{},{color:i?"yellow":"white"}),children:n.slice(0,7)})})]})}));var fr=xe.default.create({score:{flexDirection:"row",justifyContent:"space-around",paddingVertical:10},field:{flex:1,flexShrink:0,alignItems:"center"},text:{fontSize:20}});const hr=i.memo((function(){return(0,we.jsxs)(Oe.default,{style:pr.listHeader,children:[(0,we.jsx)(Oe.default,{style:pr.title,children:(0,we.jsx)(De,{style:pr.text,children:"RANK"})}),(0,we.jsx)(Oe.default,{style:pr.title,children:(0,we.jsx)(De,{style:pr.text,children:"SCORE"})}),(0,we.jsx)(Oe.default,{style:pr.title,children:(0,we.jsx)(De,{style:pr.text,children:"NAME"})})]})}));var pr=xe.default.create({listHeader:{flexDirection:"row",justifyContent:"space-around",backgroundColor:"#000"},title:{borderBottomColor:be.primary,borderBottomWidth:4,paddingVertical:2},text:{color:"white",fontSize:30}});const yr=function(){var e=Vt((function(e){return e.game.initialScore})),t=(0,i.useState)(""),r=(0,Qe.default)(t,2),n=r[0],o=r[1],a=(0,i.useState)(!1),s=(0,Qe.default)(a,2),c=s[0],u=s[1],l=(0,i.useState)(!1),d=(0,Qe.default)(l,2),f=d[0],h=d[1],p=Bt(),y=(0,i.useCallback)((function(e,t,r){o(t),u(r)}),[]);return(0,we.jsxs)(we.Fragment,{children:[(0,we.jsx)(De,{style:gr.title,children:"GAME OVER"}),(0,we.jsxs)(De,{style:gr.text,children:["Your score: ",(0,we.jsxs)(Ie.default,{style:gr.score,children:[" ",e]})]}),f?(0,we.jsx)(De,{style:gr.text,children:"Score saved !"}):(0,we.jsxs)(Oe.default,{style:gr.form,children:[(0,we.jsx)(ot,{id:"name",label:"ENTER YOUR NAME:",value:n,onInputChange:y,error:!c,errorText:"Enter at least 3 characters.",autoCapitalize:"none",min:3,maxLength:6}),(0,we.jsx)(He,{onPress:function(){p(fe({username:n,score:e})).unwrap().then((function(){h(!0)}))},disabled:!c,children:"SAVE SCORE"})]})]})};var gr=xe.default.create({title:{color:"#eee",fontSize:30},text:{color:"#ccc",fontSize:20},score:{color:"#eee",fontSize:24},form:{justifyContent:"center",alignItems:"center"}});const mr=function(){return(0,we.jsxs)(we.Fragment,{children:[(0,we.jsx)(De,{style:br.title,children:"PAUSE"}),(0,we.jsx)(De,{style:br.text,children:"Anytime you quit or close the app, the game will be saved."})]})};var br=xe.default.create({title:{color:"#eee",fontSize:30},text:{color:"#ccc",fontSize:20,paddingVertical:4}}),vr=.3*Ge.default.get("window").height;const jr=function(e){var t=e.game,r=e.children,n=e.handleInput,o=(0,Jt.useNavigation)(),a=tr(),s=(0,Qe.default)(a,3),c=s[0],u=(s[1],s[2]),l=u.isLoading,d=u.didFinish;return(0,i.useEffect)((function(){l||c(t.speed)}),[l,d]),(0,i.useLayoutEffect)((function(){o.setOptions({header:function(){return(0,we.jsx)(Qt,{speed:t.speed,lines:t.lines,score:t.score})}})}),[t.speed,t.lines,t.score]),(0,we.jsxs)(Oe.default,{style:xr.gameContainer,children:[(0,we.jsxs)(Oe.default,{style:xr.game,children:[(0,we.jsx)(Rt,{currPiece:t.currPiece,board:Array.from(t.board),boardWidth:vr,border:!0}),(0,we.jsxs)(Oe.default,{style:xr.sidePanel,children:[(0,we.jsx)(gt,{title:"hold",piece:t.heldPiece}),(0,we.jsx)(gt,{title:"next",piece:t.nextPiece}),r]})]}),(0,we.jsx)(Ut,{handleInput:n})]})};var xr=xe.default.create({gameContainer:{width:"100%",height:"100%",alignItems:"center",justifyContent:"flex-end"},game:{flexDirection:"row"},sidePanel:{marginLeft:5,alignItems:"center"}}),Or=r(8617);function wr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wr(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Sr=xe.default.create({logo:{fontSize:100,color:"white"},list:{flex:1,alignItems:"center",justifyContent:"space-evenly"},homeButton:{backgroundColor:be.primaryDark,minWidth:250,shadowRadius:0,shadowOffset:{width:0,height:6},shadowOpacity:1}});const kr=function(e){var t=e.navigation,r=(0,Or.default)(),n=Vt((function(e){return!!e.auth.accessToken})),i=Vt((function(e){return!!e.game.initialBoard}));return(0,we.jsx)(jt,{children:(0,we.jsxs)(Oe.default,{style:Pr({marginBottom:r},Sr.list),children:[(0,we.jsx)(De,{style:Sr.logo,children:(0,ge.default)("Buildie").map((function(e,t){return(0,we.jsx)(Ie.default,{style:{color:me[t+1]},children:e},e+"_"+t)}))}),(0,we.jsx)(He,{style:Sr.homeButton,onPress:function(){t.navigate("Singleplayer")},children:i?"Resume":"New game"}),(0,we.jsx)(He,{style:Sr.homeButton,onPress:function(){t.navigate("Leaderboard")},children:"Leaderboard"}),(0,we.jsx)(He,{style:Sr.homeButton,disabled:!n,onPress:function(){t.navigate("MultiplayerLobby")},children:"Multiplayer"}),(0,we.jsx)(He,{style:Sr.homeButton,onPress:function(){t.navigate("Settings")},children:"Settings"})]})})};var Cr=r(1518);const Ir=function(e){var t=(0,i.useRef)();return void 0===t.current&&(t.current={value:"function"===typeof e?e():e}),t.current.value};const Er=function(){function e(t,r,n,i){(0,xt.default)(this,e),this._shape=t,this._x=r,this._y=n,this._r=i}return(0,Ot.default)(e,[{key:"shape",get:function(){return this._shape}},{key:"x",get:function(){return this._x}},{key:"y",get:function(){return this._y}},{key:"r",get:function(){return this._r}},{key:"newPiece",value:function(e){return new Tt(this,e)}}]),e}();const Tr=function(){function e(t){for(var r in(0,xt.default)(this,e),this._shapeTypes=[],t)this._shapeTypes.push(new Er(t[r],(Ct.w-Tt.w)/2,-1,0))}return(0,Ot.default)(e,[{key:"shapeTypes",get:function(){return this._shapeTypes}}]),e}();const Dr=function(){function e(t,r,n,i,o){var a=this;(0,xt.default)(this,e),this.alreadyHeld=!1,this.doesNextPieceFit=!0,this.inputHandler=function(e){var t,r,n,i,o,s;null!=(t=a.currPiece)&&t.collided||(e===qt.MoveLeft?null==(r=a.currPiece)||r.moveLeft():e===qt.MoveRight?null==(n=a.currPiece)||n.moveRight():e===qt.MoveDown?null==(i=a.currPiece)||i.moveDown():e===qt.RotateRight?null==(o=a.currPiece)||o.rotateRight():e===qt.HardDrop?null==(s=a.currPiece)||s.hardDrop():e===qt.HoldPiece&&a.holdPiece())},this._pool=new Array(t.length);for(var s=0;s<t.length;s+=1)this._pool[s]=t[s].newPiece(r);this._currPiece=n?this._pool[n-1]:null,this._heldPiece=i?this._pool[i-1]:null,this._nextPiece=o?this._pool[o-1]:this.randomPiece()}return(0,Ot.default)(e,[{key:"currPiece",get:function(){return this._currPiece},set:function(e){this._currPiece=e}},{key:"nextPiece",get:function(){return this._nextPiece},set:function(e){this._nextPiece=e}},{key:"heldPiece",get:function(){return this._heldPiece},set:function(e){this._heldPiece=e}},{key:"randomPiece",value:function(){var e=Math.floor(Math.random()*this._pool.length);return this._pool[e]}},{key:"newPiece",value:function(){var e,t;null==(e=this.currPiece)||e.reset(),this.alreadyHeld=!1,this.doesNextPieceFit=!(null!=(t=this.nextPiece)&&t.collides()),this.currPiece=this.doesNextPieceFit?this.nextPiece:null,this.doesNextPieceFit&&(this.nextPiece=this.randomPiece())}},{key:"holdPiece",value:function(){if(null!==this.currPiece&&!this.alreadyHeld){if(this.currPiece.reset(),null===this.heldPiece)this.heldPiece=this.currPiece,this.newPiece();else{var e=this.currPiece;this.currPiece=this.heldPiece,this.heldPiece=e}this.alreadyHeld=!0}}},{key:"update",value:function(){var e;this.currPiece&&!this.currPiece.collided?null==(e=this.currPiece)||e.moveDown():this.newPiece()}},{key:"reset",value:function(){var e;null==(e=this.currPiece)||e.reset(),this.currPiece=null,this.heldPiece=null,this.nextPiece=this.randomPiece()}}]),e}();var _r=function(){function e(t){var r=t.initialBoard,n=t.initialIndexCurrPiece,i=t.initialIndexHeldPiece,o=t.initialIndexNextPiece,a=t.initialSpeed,s=t.initialLines,c=t.initialScore;(0,xt.default)(this,e),this._board=new Ct(r,a,s,c),this._piecePool=new Dr(new Tr(ct).shapeTypes,this._board,n,i,o)}return(0,Ot.default)(e,[{key:"board",get:function(){return this._board.board}},{key:"currPiece",get:function(){return this._piecePool.currPiece}},{key:"heldPiece",get:function(){var e;return null==(e=this._piecePool.heldPiece)?void 0:e.shape}},{key:"nextPiece",get:function(){var e;return null==(e=this._piecePool.nextPiece)?void 0:e.shape}},{key:"speed",get:function(){return this._board.speed}},{key:"lines",get:function(){return this._board.lines}},{key:"score",get:function(){return this._board.score}},{key:"gameOver",get:function(){return!this._piecePool.doesNextPieceFit}},{key:"inputHandler",get:function(){return this._piecePool.inputHandler}},{key:"update",value:function(){this._piecePool.update()}},{key:"reset",value:function(){this._board.reset(),this._piecePool.reset()}}]),e}();const Rr=_r;var Lr=function(e,t,r,n,i,o,a){return{initialBoard:Array.from(e),initialIndexCurrPiece:o&&+o.replace(/^0+/,"")[0]||void 0,initialIndexHeldPiece:a&&+a.replace(/^0+/,"")[0]||void 0,initialIndexNextPiece:i&&+i.replace(/^0+/,"")[0]||void 0,initialSpeed:t,initialLines:r,initialScore:n}};const Ar=function(e){var t=e.navigation,n=Vt((function(e){return e.game})),o=n.initialBoard,a=n.initialIndexCurrPiece,s=n.initialIndexHeldPiece,c=n.initialIndexNextPiece,u=n.initialSpeed,l=n.initialLines,d=n.initialScore,f=Bt(),h=(0,i.useRef)(Cr.default.currentState),p=Ir((function(){return new Rr({initialBoard:o&&Uint8Array.from(o),initialIndexCurrPiece:a,initialIndexHeldPiece:s,initialIndexNextPiece:c,initialSpeed:u,initialLines:l,initialScore:d})})),y=(0,i.useCallback)((function(e){"active"===h.current&&e.match(/inactive|background/)&&function(){var e;le.default.setItem("gameState",JSON.stringify(Lr(p.board,p.speed,p.lines,p.score,p.nextPiece,null==(e=p.currPiece)?void 0:e.shape,p.heldPiece)))}(),h.current=e}),[]),g=(0,i.useCallback)((function(){t.navigate("GameModal",{gameOver:!1})}),[]);return(0,Jt.useFocusEffect)((function(){return function(){var e;f(v(Lr(p.board,p.speed,p.lines,p.score,p.nextPiece,null==(e=p.currPiece)?void 0:e.shape,p.heldPiece)))}})),(0,i.useEffect)((function(){var e=Cr.default.addEventListener("change",y);return function(){e.remove()}}),[]),(0,we.jsx)(Pe,{children:(0,we.jsx)(nr,{game:p,children:(0,we.jsx)(ze,{pressHandler:g,icon:r(5900)})})})};var Hr=r(9566);const Mr=function(e){var t=e.navigation,r=(0,i.useState)("LOCAL"),n=(0,Qe.default)(r,2),o=n[0],a=n[1],s=(0,i.useRef)(null),c=Vt((function(e){return e.scores.localScores})),u=Vt((function(e){return e.auth.userId})),l=ae().data,d=Bt(),f=(0,i.useCallback)((function(e){var t;a(e),null==(t=s.current)||t.scrollToOffset({animated:!0,offset:0})}),[]),h=(0,i.useCallback)((function(e){var t=e.item,r=e.index;return(0,we.jsx)(dr,{rank:r+1,score:t.score,name:t.username,me:t._id===u})}),[u]);return(0,i.useEffect)((function(){d(de())}),[d]),(0,i.useLayoutEffect)((function(){t.setOptions({header:function(){return(0,we.jsx)(Ue,{gameMode:o,setGameModeHandler:f})}})}),[o]),(0,we.jsxs)(Oe.default,{style:Nr.leaderboardContainer,children:[(0,we.jsx)(Hr.default,{ref:s,data:"LOCAL"===o?c:l,keyExtractor:function(e){return e._id},renderItem:h,stickyHeaderIndices:[0],ListHeaderComponent:(0,we.jsx)(hr,{})}),(0,we.jsx)(He,{onPress:function(){t.goBack()},textStyle:Nr.button,children:"CLOSE"})]})};var Nr=xe.default.create({leaderboardContainer:{flex:1,backgroundColor:"#000"},button:{fontSize:50}});const Br=xe.default.create({centered:{flex:1,justifyContent:"center",alignItems:"center"}});const Vr=function(){var e=Bt();return(0,we.jsx)(Pe,{children:(0,we.jsx)(Oe.default,{style:Br.centered,children:(0,we.jsx)(He,{style:zr.logoutButton,onPress:function(){return e(re())},children:"Logout"})})})};var zr=xe.default.create({logoutButton:{backgroundColor:be.error}}),Fr=r(4637),Gr=r(572),qr=Ge.default.get("window").width;const Ur=function(e){var t=e.navigation,n=e.route;return(0,we.jsx)(Gr.default,{style:Wr.screen,intensity:20,children:(0,we.jsx)(Fr.default,{style:Wr.backdrop,onPress:function(){t.goBack()},children:(0,we.jsx)(Ke,{style:Wr.modalContainer,children:(0,we.jsxs)(Fr.default,{style:Wr.modal,children:[n.params.gameOver?(0,we.jsx)(yr,{}):(0,we.jsx)(mr,{}),(0,we.jsxs)(Oe.default,{style:Wr.actions,children:[(0,we.jsx)(ze,{icon:r(5489),pressHandler:function(){t.navigate("Root")}}),(0,we.jsx)(ze,{icon:n.params.gameOver?r(3433):r(2487),pressHandler:function(){t.goBack()}})]})]})})})})};var Wr=xe.default.create({screen:{flex:1},backdrop:{flex:1,justifyContent:"center",alignItems:"center"},modalContainer:{width:.75*qr,height:.75*qr,backgroundColor:"#121212EE",padding:20,borderRadius:30},modal:{width:"100%",height:"100%",alignItems:"center",justifyContent:"space-between"},actions:{flexDirection:"row",width:"50%",justifyContent:"space-evenly"}}),$r=r(4018),Jr=r(8576),Kr=r(6032);function Yr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Qr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Yr(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Zr=function(e){return e.FORM_CHANGE="FORM_CHANGE",e}({});const Xr=function(e){var t=(0,i.useReducer)((function(e,t){if(t.type===Zr.FORM_CHANGE){var r=Qr(Qr({},e.inputValues),{},(0,a.default)({},t.payload.input,t.payload.value)),n=Qr(Qr({},e.inputValidities),{},(0,a.default)({},t.payload.input,t.payload.isValid)),i=!0;for(var o in n)if(!1===n[o]){i=!1;break}return{formIsValid:i,inputValues:r,inputValidities:n}}return e}),{inputValues:Qr({},e),inputValidities:Object.keys(e).reduce((function(t,r){return Qr(Qr({},t),{},(0,a.default)({},r,!!e[r]))}),{}),formIsValid:!1}),r=(0,Qe.default)(t,2),n=r[0],o=r[1];return[n,(0,i.useCallback)((function(e,t,r){o({type:Zr.FORM_CHANGE,payload:{value:t,isValid:r,input:e}})}),[o])]};var en=r(7154),tn=r(7459);const rn=function(){var e=(0,en.usePermissions)(),t=(0,Qe.default)(e,2),r=t[0],o=t[1];return(0,i.useCallback)((0,n.default)((function*(){var e,t;return null!=r&&r.granted||(e=(yield o()).status),(null!=r&&r.granted||"granted"===e)&&(t=(yield(0,tn.default)()).data),t})),[r,o])};var nn=r(8859),on=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Something went wrong!";nn.default.alert("There's a problem",e)},an=["username"];function sn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function cn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?sn(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const un=function(){var e=(0,i.useState)(!1),t=(0,Qe.default)(e,2),r=t[0],o=t[1],a=Xr({username:"",email:"",password:""}),s=(0,Qe.default)(a,2),c=s[0],u=c.inputValues,l=c.inputValidities,d=c.formIsValid,f=s[1],h=Bt(),p=rn(),y=oe({fixedCacheKey:"shared-auth"}),g=(0,Qe.default)(y,2),m=g[0],b=g[1].isLoading,v=ie({fixedCacheKey:"shared-auth"}),j=(0,Qe.default)(v,1)[0],x=function(){var e=(0,n.default)((function*(){var e=yield p(),t=(u.username,(0,ke.default)(u,an));try{var n=yield(r?j(cn(cn({},u),{},{expoToken:e})):m(cn(cn({},t),{},{expoToken:e}))).unwrap();n.data?h(te(n.data)):on(n.problem)}catch(i){on()}}));return function(){return e.apply(this,arguments)}}();return(0,we.jsx)(Pe,{children:(0,we.jsx)($r.default,{behavior:"android"===I.default.OS?"height":"padding",style:Br.centered,children:(0,we.jsx)(Ke,{style:ln.formContainer,children:(0,we.jsxs)(Jr.default,{children:[r&&(0,we.jsx)(ot,{id:"username",label:"USERNAME",value:u.username,onInputChange:f,required:!0,minLength:6,autoCapitalize:"none",error:!l.username,errorText:"Please enter a valid username."}),(0,we.jsx)(ot,{id:"email",label:"EMAIL",value:u.email,onInputChange:f,required:!0,email:!0,minLength:10,keyboardType:"email-address",autoCapitalize:"none",error:!l.email,errorText:"Please enter a valid email address."}),(0,we.jsx)(ot,{id:"password",label:"PASSWORD",value:u.password,onInputChange:f,required:!0,secureTextEntry:!0,minLength:6,autoCapitalize:"none",error:!l.password,errorText:"Please enter a valid password."}),b?(0,we.jsx)(Oe.default,{style:ln.loadingSpinner,children:(0,we.jsx)(Kr.default,{size:"large",color:"orange"})}):(0,we.jsx)(He,{style:ln.button,disabled:r?!d:!l.email||!l.password,onPress:x,children:r?"REGISTER":"LOGIN"}),(0,we.jsx)(He,{style:ln.button,onPress:function(){return o((function(e){return!e}))},children:r?"Switch to Login":"Switch to Register"})]})})})})};var ln=xe.default.create({formContainer:{backgroundColor:"#121212CC",width:"80%",maxWidth:400,maxHeight:400,padding:20},loadingSpinner:{marginTop:10},button:{marginTop:10,alignSelf:"center",paddingHorizontal:0}});const dn=function(){var e=Bt();return(0,i.useEffect)((function(){(0,n.default)((function*(){var t=null;"web"!==I.default.OS&&(t=yield z.getItemAsync(Z)),e(t?h(JSON.parse(t)):y())}))(),(0,n.default)((function*(){var t=yield le.default.getItem(X);t&&e(v(JSON.parse(t)))}))(),(0,n.default)((function*(){var t=yield le.default.getItem(ee);t&&e(P(JSON.parse(t)))}))()}),[e]),(0,we.jsx)(Pe,{children:(0,we.jsx)(Oe.default,{style:Br.centered,children:(0,we.jsx)(Kr.default,{size:"large",color:"orange"})})})};var fn=r(6085),hn=r(2790),pn=r.n(hn),yn=function(){var e=(0,n.default)((function*(e){le.default.setItem(ee,JSON.stringify(e))}));return function(t){return e.apply(this,arguments)}}();const gn=function(e){var t=e.navigation,n=Vt((function(e){return e.game.initialSpeed})),o=Vt((function(e){return e.settings})),a=(0,i.useState)(n||1),s=(0,Qe.default)(a,2),c=s[0],u=s[1],l=(0,i.useState)(o.sounds),d=(0,Qe.default)(l,2),f=d[0],h=d[1],p=(0,i.useState)(o.haptics),y=(0,Qe.default)(p,2),g=y[0],m=y[1],b=Bt();return(0,we.jsx)(Pe,{children:(0,we.jsx)(Jr.default,{contentContainerStyle:mn.settingsContainer,children:(0,we.jsxs)(Ke,{style:mn.settings,children:[(0,we.jsxs)(Oe.default,{style:mn.setting,children:[(0,we.jsxs)(De,{style:mn.label,children:["LEVEL ",c]}),(0,we.jsx)(Oe.default,{children:(0,we.jsx)(pn(),{value:c,onValueChange:function(e){u(e)},step:1,minimumValue:1,maximumValue:10,style:mn.slider,minimumTrackTintColor:be.primary,thumbTintColor:be.white})})]}),(0,we.jsx)(Oe.default,{style:mn.noteContainer,children:(0,we.jsx)(De,{style:mn.note,children:"Please note, changing the game speed will reset the game."})}),(0,we.jsxs)(Oe.default,{style:mn.setting,children:[(0,we.jsx)(De,{style:mn.label,children:"SOUNDS"}),(0,we.jsx)(Oe.default,{children:(0,we.jsx)(fn.default,{value:f,onValueChange:function(){h((function(e){return!e}))},trackColor:{true:be.primary},thumbColor:be.white})})]}),(0,we.jsxs)(Oe.default,{style:mn.setting,children:[(0,we.jsx)(De,{style:mn.label,children:"HAPTICS"}),(0,we.jsx)(Oe.default,{children:(0,we.jsx)(fn.default,{value:g,onValueChange:function(){m((function(e){return!e}))},trackColor:{true:be.primary},thumbColor:be.white})})]}),(0,we.jsx)(ze,{style:mn.button,pressHandler:function(){b(function(e){var t=e.speed,r=e.sounds,n=e.haptics;return function(e){e(j(t)),e(P({sounds:r,haptics:n})),yn({sounds:r,haptics:n})}}({speed:c,sounds:f,haptics:g})),t.goBack()},icon:r(1915)})]})})})};var mn=xe.default.create({settingsContainer:{padding:30},settings:{padding:30,backgroundColor:be.black,alignItems:"center"},setting:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:"100%",paddingVertical:15},label:{color:be.white,fontSize:24},noteContainer:{paddingVertical:10,width:"100%"},note:{fontSize:18,color:"#ccc",paddingVertical:4},slider:{width:150,height:20},button:{marginTop:10}});const bn=function(e){var t=e.navigation,r=(0,i.useState)(""),o=(0,Qe.default)(r,2),a=o[0],s=o[1],c=(0,i.useState)(!1),u=(0,Qe.default)(c,2),l=u[0],d=u[1],f=(0,i.useCallback)((function(e,t,r){s(t),d(r)}),[]),h=se(),p=(0,Qe.default)(h,1)[0],y=(0,i.useCallback)((0,n.default)((function*(){try{var e=yield p(a).unwrap();e.data?t.replace("MultiplayerGame",{gameId:e.data._id,initiator:!0}):on(e.problem)}catch(r){on()}})),[a]);return(0,we.jsxs)(Gr.default,{style:vn.screen,intensity:20,children:[(0,we.jsx)(Fr.default,{style:vn.backdrop,onPress:function(){t.goBack()}}),(0,we.jsx)($r.default,{behavior:"android"===I.default.OS?"padding":"position",style:vn.bottomContainer,children:(0,we.jsxs)(Ke,{style:vn.lobby,children:[(0,we.jsx)(De,{style:vn.text,children:"Insert an username of player to challenge"}),(0,we.jsx)(Oe.default,{children:(0,we.jsx)(ot,{id:"username",label:"USERNAME",value:a,onInputChange:f,required:!0,minLength:6,autoCapitalize:"none",error:!l,errorText:"Please enter a valid username."})}),(0,we.jsx)(He,{onPress:y,children:"Challenge"})]})})]})};var vn=xe.default.create({screen:{flex:1},backdrop:{flex:3},bottomContainer:{backgroundColor:be.primaryLight,flex:2,width:"100%",justifyContent:"center",alignItems:"center"},lobby:{backgroundColor:be.black,width:"75%",paddingVertical:10,paddingHorizontal:20,justifyContent:"space-between"},text:{color:"#eee",fontSize:20,textAlign:"center",paddingVertical:10}});const jn=function(e){var t=e.navigation,r=e.route,n=ce(r.params.gameId).data,o=Vt((function(e){return e.auth.userId})),a=ue(),s=(0,Qe.default)(a,1)[0],c=Ir((function(){return new Rr({})})),u=$t(),l=(0,i.useCallback)((function(){c.update(),s({gameId:r.params.gameId,gameOver:c.gameOver,playerBoard:Array.from(c.board)})}),[]),d=At(c.speed,l,u),f=d.start,h=d.stop;(0,i.useEffect)((function(){"STARTED"===(null==n?void 0:n.gameStatus)&&f(),"FINISHED"===(null==n?void 0:n.gameStatus)&&(h(),nn.default.alert("Game over",n.winner+" win!",[{text:"Home",onPress:function(){return t.navigate("Root")},style:"destructive"}]))}),[null==n?void 0:n.gameStatus]),(0,i.useEffect)((function(){return s({gameId:r.params.gameId,gameOver:c.gameOver,playerBoard:Array.from(c.board)}),function(){s({gameId:r.params.gameId,gameOver:!0,playerBoard:Array.from(c.board)})}}),[]);var p=(0,i.useCallback)((function(e){c.inputHandler(e),u()}),[]),y=(0,i.useMemo)((function(){var e;return null!=(e=null==n?void 0:n.players.filter((function(e){return e.user!==o}))[0].board)?e:[]}),[n]);return(0,we.jsx)(Pe,{children:(0,we.jsx)(jr,{game:c,handleInput:p,children:(0,we.jsx)(Rt,{board:y,boardWidth:75})})})};xe.default.create({});var xn=r(9125),On=(0,r(4209).default)();const wn=function(){var e=Vt((function(e){return!!e.auth.accessToken}));return(0,we.jsxs)(On.Navigator,{screenOptions:{headerShown:!1,tabBarStyle:{position:"absolute",borderTopWidth:0},tabBarLabelStyle:{fontSize:16,fontFamily:"dogbyte",paddingBottom:5},tabBarActiveTintColor:"orange",tabBarInactiveTintColor:"#bbb",tabBarBackground:function(){return(0,we.jsx)(Gr.default,{tint:"dark",intensity:40,style:{flex:1}})}},children:[(0,we.jsx)(On.Screen,{name:"Home",component:kr,options:{tabBarIcon:function(e){var t=e.size,r=e.color;return(0,we.jsx)(Ht.default,{name:"home",size:t,color:r})}}}),e?(0,we.jsx)(On.Screen,{name:"Profile",component:Vr,options:{tabBarIcon:function(e){var t=e.size,r=e.color;return(0,we.jsx)(Ht.default,{name:"user",size:t,color:r})},headerShown:!1}}):(0,we.jsx)(On.Screen,{name:"Login",component:un,options:{tabBarIcon:function(e){var t=e.size,r=e.color;return(0,we.jsx)(Ht.default,{name:"sign-in",size:t,color:r})}}})]})};var Pn=(0,xn.default)();const Sn=function(){return(0,we.jsxs)(Pn.Navigator,{children:[(0,we.jsx)(Pn.Screen,{name:"Root",component:wn,options:{headerShown:!1}}),(0,we.jsx)(Pn.Screen,{name:"Singleplayer",component:Ar}),(0,we.jsx)(Pn.Screen,{name:"GameModal",component:Ur,options:{presentation:"transparentModal",headerShown:!1,animation:"none"}}),(0,we.jsx)(Pn.Screen,{name:"Leaderboard",component:Mr}),(0,we.jsx)(Pn.Screen,{name:"MultiplayerLobby",component:bn,options:{presentation:"transparentModal",headerShown:!1,animation:"fade"}}),(0,we.jsx)(Pn.Screen,{name:"MultiplayerGame",component:jn}),(0,we.jsx)(Pn.Screen,{name:"Settings",component:gn,options:{headerTitle:"SETTINGS",headerStyle:{backgroundColor:be.primaryDark},headerTitleStyle:{fontSize:24,fontFamily:"dogbyte"},headerTintColor:be.white}})]})};var kn=r(5136);const Cn=function(){var e=(0,i.useRef)(null),t=Vt((function(e){return!!e.auth.didTryLogin})),r=Vt((function(e){return!!e.auth.accessToken}));return(0,i.useEffect)((function(){if(r){var t=kn.addNotificationResponseReceivedListener((function(t){var r,n=t.notification.request.content.data;"gameId"in n&&"string"===typeof n.gameId&&(null==(r=e.current)||r.navigate("MultiplayerGame",{gameId:n.gameId,initiator:!1}))}));return function(){t.remove()}}}),[r]),(0,we.jsx)(ye.default,{ref:e,children:t?(0,we.jsx)(Sn,{}):(0,we.jsx)(dn,{})})};var In=r(8749);function En(){return(0,we.jsx)(o.Provider,{store:pe,children:(0,we.jsx)(cr,{children:(0,we.jsx)(Cn,{})})})}"web"!==I.default.OS&&new Promise((function(e,t){k.transaction((function(r){r.executeSql("            CREATE TABLE IF NOT EXISTS scores (                _id INTEGER PRIMARY KEY,                 username TEXT NOT NULL,                 score INTEGER NOT NULL             );",[],(function(){e(!0)}),(function(e,r){return t(r),!1}))}))})).then((function(){console.log("Initialized db success.")})).catch((function(e){console.log("Initialized db failed."),console.log(e)})),In.setNotificationHandler({handleNotification:function(){var e=(0,n.default)((function*(){return{shouldShowAlert:!0,shouldPlaySound:!0,shouldSetBadge:!0}}));return function(){return e.apply(this,arguments)}}()})},1753:(e,t,r)=>{e.exports=r.p+"static/media/dogbyte.57b4a9fc13399c184d98.otf"},496:(e,t,r)=>{e.exports=r.p+"static/media/1.9e5448f0ff23062ed1f8.mp3"},7096:(e,t,r)=>{e.exports=r.p+"static/media/10.503b5d06d20afcb8ebcd.mp3"},2618:(e,t,r)=>{e.exports=r.p+"static/media/11.60240f4ef5de6806053f.mp3"},2976:(e,t,r)=>{e.exports=r.p+"static/media/2.f6683debab2372d5413d.mp3"},7434:(e,t,r)=>{e.exports=r.p+"static/media/3.b3c0cfc659997b15729a.mp3"},9163:(e,t,r)=>{e.exports=r.p+"static/media/4.4fd2c8beab86c1a97b34.mp3"},1309:(e,t,r)=>{e.exports=r.p+"static/media/5.acc83717048193639235.mp3"},7304:(e,t,r)=>{e.exports=r.p+"static/media/6.11b9fa5e91fdc51c4743.mp3"},6704:(e,t,r)=>{e.exports=r.p+"static/media/7.663e7a140d75a0c539f5.mp3"},8740:(e,t,r)=>{e.exports=r.p+"static/media/8.51125fe4e80f5942fe14.mp3"},2499:(e,t,r)=>{e.exports=r.p+"static/media/9.be7a7c57501f45f42074.mp3"},9718:(e,t,r)=>{e.exports=r.p+"static/media/blocks.a307cb9687beb7e71d91.png"},5489:(e,t,r)=>{e.exports=r.p+"static/media/escape.5d7250728f52729bb797.png"},371:(e,t,r)=>{e.exports=r.p+"static/media/lvl.071eacba47cc3b2faf0a.png"},5900:(e,t,r)=>{e.exports=r.p+"static/media/pause.4bd96f4489319d841178.png"},2487:(e,t,r)=>{e.exports=r.p+"static/media/play.560179b467ed1fcee17a.png"},3433:(e,t,r)=>{e.exports=r.p+"static/media/replay.092a3228e1b5bdd03ce6.png"},1915:(e,t,r)=>{e.exports=r.p+"static/media/submit.c4e71662db4568ae125b.png"},7152:(e,t,r)=>{e.exports=r.p+"static/media/trophy.269221212b70985da365.png"}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}r.m=e,(()=>{var e=[];r.O=(t,n,i,o)=>{if(!n){var a=1/0;for(l=0;l<e.length;l++){for(var[n,i,o]=e[l],s=!0,c=0;c<n.length;c++)(!1&o||a>=o)&&Object.keys(r.O).every((e=>r.O[e](n[c])))?n.splice(c--,1):(s=!1,o<a&&(a=o));if(s){e.splice(l--,1);var u=i();void 0!==u&&(t=u)}}return t}o=o||0;for(var l=e.length;l>0&&e[l-1][2]>o;l--)e[l]=e[l-1];e[l]=[n,i,o]}})(),r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;r.t=function(n,i){if(1&i&&(n=this(n)),8&i)return n;if("object"===typeof n&&n){if(4&i&&n.__esModule)return n;if(16&i&&"function"===typeof n.then)return n}var o=Object.create(null);r.r(o);var a={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&n;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>a[e]=()=>n[e]));return a.default=()=>n,r.d(o,a),o}})(),r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="/Buildie/",(()=>{var e={179:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var i,o,[a,s,c]=n,u=0;if(a.some((t=>0!==e[t]))){for(i in s)r.o(s,i)&&(r.m[i]=s[i]);if(c)var l=c(r)}for(t&&t(n);u<a.length;u++)o=a[u],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return r.O(l)},n=self.webpackChunkweb=self.webpackChunkweb||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var n=r.O(void 0,[242],(()=>r(9386)));n=r.O(n)})();
//# sourceMappingURL=main.4f84e606.js.map